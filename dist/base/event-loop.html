<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>事件循环机制 | Blog</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.8e5f961b.css" as="style"><link rel="preload" href="/assets/js/app.a68e905e.js" as="script"><link rel="preload" href="/assets/js/2.545454b5.js" as="script"><link rel="preload" href="/assets/js/29.9876f7ff.js" as="script"><link rel="prefetch" href="/assets/js/10.c3cf1c12.js"><link rel="prefetch" href="/assets/js/11.33587a7b.js"><link rel="prefetch" href="/assets/js/12.aff60a74.js"><link rel="prefetch" href="/assets/js/13.155a1953.js"><link rel="prefetch" href="/assets/js/14.0b1d1d72.js"><link rel="prefetch" href="/assets/js/15.efd7d200.js"><link rel="prefetch" href="/assets/js/16.1d7d243b.js"><link rel="prefetch" href="/assets/js/17.0579b7a7.js"><link rel="prefetch" href="/assets/js/18.30e65476.js"><link rel="prefetch" href="/assets/js/19.e2a0465c.js"><link rel="prefetch" href="/assets/js/20.c7213eb6.js"><link rel="prefetch" href="/assets/js/21.781d45ea.js"><link rel="prefetch" href="/assets/js/22.b83aaefb.js"><link rel="prefetch" href="/assets/js/23.d5ca9633.js"><link rel="prefetch" href="/assets/js/24.5c397418.js"><link rel="prefetch" href="/assets/js/25.634ab70c.js"><link rel="prefetch" href="/assets/js/26.85ea7d49.js"><link rel="prefetch" href="/assets/js/27.6056f0f9.js"><link rel="prefetch" href="/assets/js/28.29f349c6.js"><link rel="prefetch" href="/assets/js/3.e1ad05a6.js"><link rel="prefetch" href="/assets/js/30.3a9cd144.js"><link rel="prefetch" href="/assets/js/31.00835958.js"><link rel="prefetch" href="/assets/js/32.76d09365.js"><link rel="prefetch" href="/assets/js/33.53d04d6e.js"><link rel="prefetch" href="/assets/js/34.285672ce.js"><link rel="prefetch" href="/assets/js/35.59fc3e90.js"><link rel="prefetch" href="/assets/js/36.51a28065.js"><link rel="prefetch" href="/assets/js/37.9afa9b43.js"><link rel="prefetch" href="/assets/js/38.76ee8f09.js"><link rel="prefetch" href="/assets/js/39.74b96b1a.js"><link rel="prefetch" href="/assets/js/4.dda20d7b.js"><link rel="prefetch" href="/assets/js/40.bf9a8a1e.js"><link rel="prefetch" href="/assets/js/41.2c5d26f5.js"><link rel="prefetch" href="/assets/js/42.029fa221.js"><link rel="prefetch" href="/assets/js/43.8f5d1319.js"><link rel="prefetch" href="/assets/js/44.84525bb6.js"><link rel="prefetch" href="/assets/js/45.44ded8a3.js"><link rel="prefetch" href="/assets/js/46.c37a17f5.js"><link rel="prefetch" href="/assets/js/47.4af73619.js"><link rel="prefetch" href="/assets/js/48.de965b8f.js"><link rel="prefetch" href="/assets/js/49.4cc50a9d.js"><link rel="prefetch" href="/assets/js/5.b38ef4db.js"><link rel="prefetch" href="/assets/js/50.8d9e604a.js"><link rel="prefetch" href="/assets/js/51.37da19a3.js"><link rel="prefetch" href="/assets/js/52.a3446c3a.js"><link rel="prefetch" href="/assets/js/53.6f8564f2.js"><link rel="prefetch" href="/assets/js/54.61f6294c.js"><link rel="prefetch" href="/assets/js/55.13e07aad.js"><link rel="prefetch" href="/assets/js/56.8867fe90.js"><link rel="prefetch" href="/assets/js/57.e55257f4.js"><link rel="prefetch" href="/assets/js/58.6fa822d6.js"><link rel="prefetch" href="/assets/js/59.6e329073.js"><link rel="prefetch" href="/assets/js/6.d24e8dfb.js"><link rel="prefetch" href="/assets/js/60.0ca372ae.js"><link rel="prefetch" href="/assets/js/61.35403f53.js"><link rel="prefetch" href="/assets/js/62.4ab8be6d.js"><link rel="prefetch" href="/assets/js/63.2e275df4.js"><link rel="prefetch" href="/assets/js/64.6790785c.js"><link rel="prefetch" href="/assets/js/65.dde7c8e4.js"><link rel="prefetch" href="/assets/js/66.cd7f8acb.js"><link rel="prefetch" href="/assets/js/7.ee16b613.js"><link rel="prefetch" href="/assets/js/8.71ca7b19.js"><link rel="prefetch" href="/assets/js/9.6dc304b9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8e5f961b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/base/" class="nav-link router-link-active">
  基础
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frame/vue/v3/" class="nav-link">
  v3
</a></li><li class="dropdown-subitem"><a href="/frame/vue/v2/" class="nav-link">
  v2
</a></li><li class="dropdown-subitem"><a href="/frame/vue/vuex/" class="nav-link">
  Vuex
</a></li><li class="dropdown-subitem"><a href="/frame/vue/vue-router/" class="nav-link">
  VueRouter
</a></li></ul></li><li class="dropdown-item"><h4>
          React
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frame/react/react/" class="nav-link">
  React
</a></li><li class="dropdown-subitem"><a href="/frame/react/react-router/" class="nav-link">
  ReactRouter
</a></li><li class="dropdown-subitem"><a href="/frame/react/redux/" class="nav-link">
  Redux
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="打包工具" class="dropdown-title"><span class="title">打包工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="打包工具" class="mobile-dropdown-title"><span class="title">打包工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Webpack
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/bundle-tool/webpack/v2.html" class="nav-link">
  v2
</a></li><li class="dropdown-subitem"><a href="/bundle-tool/webpack/v4.html" class="nav-link">
  v4
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/bundle-tool/rollup/" class="nav-link">
  Rollup
</a></li><li class="dropdown-item"><!----> <a href="/bundle-tool/gulp/" class="nav-link">
  Gulp
</a></li></ul></div></div><div class="nav-item"><a href="/share/" class="nav-link">
  分享
</a></div><div class="nav-item"><a href="https://gitee.com/luguanrui/lgr-tools?_from=gitee_search" target="_blank" rel="noopener noreferrer" class="nav-link external">
  工具函数
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/luguanrui?tab=repositories" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/base/" class="nav-link router-link-active">
  基础
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frame/vue/v3/" class="nav-link">
  v3
</a></li><li class="dropdown-subitem"><a href="/frame/vue/v2/" class="nav-link">
  v2
</a></li><li class="dropdown-subitem"><a href="/frame/vue/vuex/" class="nav-link">
  Vuex
</a></li><li class="dropdown-subitem"><a href="/frame/vue/vue-router/" class="nav-link">
  VueRouter
</a></li></ul></li><li class="dropdown-item"><h4>
          React
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frame/react/react/" class="nav-link">
  React
</a></li><li class="dropdown-subitem"><a href="/frame/react/react-router/" class="nav-link">
  ReactRouter
</a></li><li class="dropdown-subitem"><a href="/frame/react/redux/" class="nav-link">
  Redux
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="打包工具" class="dropdown-title"><span class="title">打包工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="打包工具" class="mobile-dropdown-title"><span class="title">打包工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Webpack
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/bundle-tool/webpack/v2.html" class="nav-link">
  v2
</a></li><li class="dropdown-subitem"><a href="/bundle-tool/webpack/v4.html" class="nav-link">
  v4
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/bundle-tool/rollup/" class="nav-link">
  Rollup
</a></li><li class="dropdown-item"><!----> <a href="/bundle-tool/gulp/" class="nav-link">
  Gulp
</a></li></ul></div></div><div class="nav-item"><a href="/share/" class="nav-link">
  分享
</a></div><div class="nav-item"><a href="https://gitee.com/luguanrui/lgr-tools?_from=gitee_search" target="_blank" rel="noopener noreferrer" class="nav-link external">
  工具函数
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/luguanrui?tab=repositories" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/base/" aria-current="page" class="sidebar-link">目录</a></li><li><a href="/base/html.html" class="sidebar-link">html5相关</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/html.html#浏览器中输入url回车发生了什么" class="sidebar-link">浏览器中输入url回车发生了什么</a></li><li class="sidebar-sub-header"><a href="/base/html.html#浏览器的渲染过程" class="sidebar-link">浏览器的渲染过程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/html.html#_1-解析html生成dom树" class="sidebar-link">1.解析HTML生成DOM树</a></li><li class="sidebar-sub-header"><a href="/base/html.html#_2-解析css生成cssom规则树" class="sidebar-link">2.解析CSS生成CSSOM规则树</a></li><li class="sidebar-sub-header"><a href="/base/html.html#_3-将dom树与cssom规则树合并在一起生成rendertree渲染树" class="sidebar-link">3. 将DOM树与CSSOM规则树合并在一起生成RenderTree渲染树</a></li><li class="sidebar-sub-header"><a href="/base/html.html#_4-遍历渲染树开始布局-计算每个节点的位置、大小-layout-回流" class="sidebar-link">4.遍历渲染树开始布局，计算每个节点的位置、大小（Layout(回流）</a></li><li class="sidebar-sub-header"><a href="/base/html.html#_5-将渲染树每个节点绘制到屏幕" class="sidebar-link">5.将渲染树每个节点绘制到屏幕</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/html.html#浏览器的回流与重绘" class="sidebar-link">浏览器的回流与重绘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/html.html#什么是回流和重绘" class="sidebar-link">什么是回流和重绘</a></li><li class="sidebar-sub-header"><a href="/base/html.html#导致回流的操作" class="sidebar-link">导致回流的操作</a></li><li class="sidebar-sub-header"><a href="/base/html.html#如何避免" class="sidebar-link">如何避免</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/html.html#href和src的区别" class="sidebar-link">href和src的区别</a></li><li class="sidebar-sub-header"><a href="/base/html.html#img标签中的alt和title属性的作用" class="sidebar-link">img标签中的alt和title属性的作用</a></li><li class="sidebar-sub-header"><a href="/base/html.html#doctype的作用" class="sidebar-link">DOCTYPE的作用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/html.html#html5" class="sidebar-link">HTML5</a></li><li class="sidebar-sub-header"><a href="/base/html.html#html4-01-strict-严格模式" class="sidebar-link">HTML4.01 Strict（严格模式）</a></li><li class="sidebar-sub-header"><a href="/base/html.html#html4-01-transitional-传统模式" class="sidebar-link">HTML4.01 Transitional（传统模式）</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/html.html#canvas与svg的区别" class="sidebar-link">Canvas与SVG的区别</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/html.html#svg" class="sidebar-link">SVG</a></li><li class="sidebar-sub-header"><a href="/base/html.html#canvas" class="sidebar-link">Canvas</a></li><li class="sidebar-sub-header"><a href="/base/html.html#对比简述" class="sidebar-link">对比简述</a></li></ul></li></ul></li><li><a href="/base/css.html" class="sidebar-link">css3相关</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/css.html#bfc及其工作原理" class="sidebar-link">BFC及其工作原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/css.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/base/css.html#bfc的规则" class="sidebar-link">BFC的规则</a></li><li class="sidebar-sub-header"><a href="/base/css.html#如何生成bfc" class="sidebar-link">如何生成BFC</a></li><li class="sidebar-sub-header"><a href="/base/css.html#bfc的作用" class="sidebar-link">BFC的作用</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/css.html#盒模型" class="sidebar-link">盒模型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/css.html#概念" class="sidebar-link">概念</a></li><li class="sidebar-sub-header"><a href="/base/css.html#标准盒模型与ie模盒型" class="sidebar-link">标准盒模型与IE模盒型</a></li><li class="sidebar-sub-header"><a href="/base/css.html#js如何设置获取盒模型对应的宽和高" class="sidebar-link">JS如何设置获取盒模型对应的宽和高</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/css.html#清除浮动" class="sidebar-link">清除浮动</a></li><li class="sidebar-sub-header"><a href="/base/css.html#display-none、visibile-hidden、opacity-0的区别" class="sidebar-link">display:none、visibile:hidden、opacity:0的区别</a></li><li class="sidebar-sub-header"><a href="/base/css.html#水平垂直居中的方式" class="sidebar-link">水平垂直居中的方式</a></li><li class="sidebar-sub-header"><a href="/base/css.html#文本超出部分显示省略号" class="sidebar-link">文本超出部分显示省略号</a></li><li class="sidebar-sub-header"><a href="/base/css.html#页面布局" class="sidebar-link">页面布局</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/css.html#三栏布局" class="sidebar-link">三栏布局</a></li><li class="sidebar-sub-header"><a href="/base/css.html#flex布局" class="sidebar-link">flex布局</a></li><li class="sidebar-sub-header"><a href="/base/css.html#绝对定位布局absolute" class="sidebar-link">绝对定位布局absolute</a></li><li class="sidebar-sub-header"><a href="/base/css.html#浮动布局float" class="sidebar-link">浮动布局float</a></li><li class="sidebar-sub-header"><a href="/base/css.html#表格布局table" class="sidebar-link">表格布局table</a></li><li class="sidebar-sub-header"><a href="/base/css.html#网格布局grid" class="sidebar-link">网格布局grid</a></li></ul></li></ul></li><li><a href="/base/scope.html" class="sidebar-link">作用域和闭包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/scope.html#内置类型" class="sidebar-link">内置类型</a></li><li class="sidebar-sub-header"><a href="/base/scope.html#作用域" class="sidebar-link">作用域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/scope.html#定义" class="sidebar-link">定义</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/scope.html#作用域链" class="sidebar-link">作用域链</a></li><li class="sidebar-sub-header"><a href="/base/scope.html#let、var、const的区别" class="sidebar-link">let、var、const的区别</a></li><li class="sidebar-sub-header"><a href="/base/scope.html#闭包" class="sidebar-link">闭包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/scope.html#定义-2" class="sidebar-link">定义</a></li></ul></li></ul></li><li><a href="/base/dom.html" class="sidebar-link">DOM事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/dom.html#dom事件-2" class="sidebar-link">DOM事件</a></li><li class="sidebar-sub-header"><a href="/base/dom.html#dom事件模型" class="sidebar-link">DOM事件模型</a></li><li class="sidebar-sub-header"><a href="/base/dom.html#dom事件流" class="sidebar-link">DOM事件流</a></li><li class="sidebar-sub-header"><a href="/base/dom.html#event对象的常见应用" class="sidebar-link">Event对象的常见应用</a></li><li class="sidebar-sub-header"><a href="/base/dom.html#自定义事件-或者是模拟事件" class="sidebar-link">自定义事件,或者是模拟事件</a></li><li class="sidebar-sub-header"><a href="/base/dom.html#拓展" class="sidebar-link">拓展</a></li></ul></li><li><a href="/base/prototype-chain.html" class="sidebar-link">原型链</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/prototype-chain.html#原型对象" class="sidebar-link">原型对象</a></li><li class="sidebar-sub-header"><a href="/base/prototype-chain.html#构造函数" class="sidebar-link">构造函数</a></li><li class="sidebar-sub-header"><a href="/base/prototype-chain.html#原型链-2" class="sidebar-link">原型链</a></li><li class="sidebar-sub-header"><a href="/base/prototype-chain.html#创建对象有几种方法" class="sidebar-link">创建对象有几种方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/prototype-chain.html#字面量方法" class="sidebar-link">字面量方法</a></li><li class="sidebar-sub-header"><a href="/base/prototype-chain.html#构造函数-2" class="sidebar-link">构造函数</a></li><li class="sidebar-sub-header"><a href="/base/prototype-chain.html#object-create" class="sidebar-link">Object.create()</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/prototype-chain.html#原型、构造函数、实例、原型链的关系" class="sidebar-link">原型、构造函数、实例、原型链的关系</a></li><li class="sidebar-sub-header"><a href="/base/prototype-chain.html#instanceof的原理" class="sidebar-link">instanceof的原理</a></li><li class="sidebar-sub-header"><a href="/base/prototype-chain.html#new运算符" class="sidebar-link">new运算符</a></li><li class="sidebar-sub-header"><a href="/base/prototype-chain.html#类与实例" class="sidebar-link">类与实例</a></li><li class="sidebar-sub-header"><a href="/base/prototype-chain.html#类与继承" class="sidebar-link">类与继承</a></li><li class="sidebar-sub-header"><a href="/base/prototype-chain.html#继承的几种方式" class="sidebar-link">继承的几种方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/prototype-chain.html#_1-借助构造函数实现继承" class="sidebar-link">1. 借助构造函数实现继承</a></li><li class="sidebar-sub-header"><a href="/base/prototype-chain.html#_2-借助原型链实现继承" class="sidebar-link">2. 借助原型链实现继承</a></li><li class="sidebar-sub-header"><a href="/base/prototype-chain.html#_3-组合方式-组合构造函数和原型链两种方式" class="sidebar-link">3. 组合方式,组合构造函数和原型链两种方式</a></li><li class="sidebar-sub-header"><a href="/base/prototype-chain.html#_4-优化方式1-通过父类的prototype" class="sidebar-link">4. 优化方式1: 通过父类的prototype</a></li><li class="sidebar-sub-header"><a href="/base/prototype-chain.html#_5-优化方式2-通过object-create" class="sidebar-link">5. 优化方式2：通过Object.create()</a></li><li class="sidebar-sub-header"><a href="/base/prototype-chain.html#_6-使用es6的extends" class="sidebar-link">6. 使用es6的extends</a></li></ul></li></ul></li><li><a href="/base/communications.html" class="sidebar-link">通信类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/communications.html#什么是同源策略及限制" class="sidebar-link">什么是同源策略及限制</a></li><li class="sidebar-sub-header"><a href="/base/communications.html#前后端如何通信" class="sidebar-link">前后端如何通信</a></li><li class="sidebar-sub-header"><a href="/base/communications.html#如何创建ajax-原生" class="sidebar-link">如何创建Ajax（原生）</a></li><li class="sidebar-sub-header"><a href="/base/communications.html#跨域通信的几种方式-5种" class="sidebar-link">跨域通信的几种方式（5种）</a></li><li class="sidebar-sub-header"><a href="/base/communications.html#怎么与服务端保持连接" class="sidebar-link">怎么与服务端保持连接</a></li><li class="sidebar-sub-header"><a href="/base/communications.html#cookie有哪些属性" class="sidebar-link">cookie有哪些属性</a></li><li class="sidebar-sub-header"><a href="/base/communications.html#前端存储" class="sidebar-link">前端存储</a></li><li class="sidebar-sub-header"><a href="/base/communications.html#怎么禁止js访问cookie" class="sidebar-link">怎么禁止js访问cookie</a></li></ul></li><li><a href="/base/http.html" class="sidebar-link">HTTP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/http.html#http协议的主要特点" class="sidebar-link">HTTP协议的主要特点</a></li><li class="sidebar-sub-header"><a href="/base/http.html#http报文的组成部分" class="sidebar-link">HTTP报文的组成部分</a></li><li class="sidebar-sub-header"><a href="/base/http.html#http请求的方法" class="sidebar-link">HTTP请求的方法</a></li><li class="sidebar-sub-header"><a href="/base/http.html#post个get的区别-记住三到四个" class="sidebar-link">POST个GET的区别（记住三到四个）</a></li><li class="sidebar-sub-header"><a href="/base/http.html#http状态码" class="sidebar-link">HTTP状态码</a></li><li class="sidebar-sub-header"><a href="/base/http.html#什么是持久连接-每个连接可以处理多个请求-响应事务" class="sidebar-link">什么是持久连接：每个连接可以处理多个请求-响应事务</a></li><li class="sidebar-sub-header"><a href="/base/http.html#什么是管线化" class="sidebar-link">什么是管线化</a></li><li class="sidebar-sub-header"><a href="/base/http.html#http和https的区别" class="sidebar-link">http和https的区别</a></li><li class="sidebar-sub-header"><a href="/base/http.html#简述https原理-以及与http的区别" class="sidebar-link">简述https原理，以及与http的区别</a></li><li class="sidebar-sub-header"><a href="/base/http.html#操作系统中进程和线程怎么通信" class="sidebar-link">操作系统中进程和线程怎么通信</a></li><li class="sidebar-sub-header"><a href="/base/http.html#你知道哪些http头部" class="sidebar-link">你知道哪些http头部</a></li><li class="sidebar-sub-header"><a href="/base/http.html#tcp三次握手四次挥手" class="sidebar-link">TCP三次握手四次挥手</a></li><li class="sidebar-sub-header"><a href="/base/http.html#tcp为什么建立连接协议是三次握手-而关闭连接却是四次握手" class="sidebar-link">TCP为什么建立连接协议是三次握手，而关闭连接却是四次握手</a></li></ul></li><li><a href="/base/safe.html" class="sidebar-link">安全类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/safe.html#csrf-跨站请求伪造" class="sidebar-link">CSRF-跨站请求伪造</a></li><li class="sidebar-sub-header"><a href="/base/safe.html#xss-跨域脚本攻击" class="sidebar-link">XSS-跨域脚本攻击</a></li></ul></li><li><a href="/base/algorithm.html" class="sidebar-link">算法类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/algorithm.html#将数组转化为树形结构" class="sidebar-link">将数组转化为树形结构</a></li><li class="sidebar-sub-header"><a href="/base/algorithm.html#排序" class="sidebar-link">排序</a></li><li class="sidebar-sub-header"><a href="/base/algorithm.html#堆栈、队列、链表" class="sidebar-link">堆栈、队列、链表</a></li><li class="sidebar-sub-header"><a href="/base/algorithm.html#递归" class="sidebar-link">递归</a></li><li class="sidebar-sub-header"><a href="/base/algorithm.html#浅拷贝和深拷贝" class="sidebar-link">浅拷贝和深拷贝</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/algorithm.html#浅拷贝" class="sidebar-link">浅拷贝</a></li><li class="sidebar-sub-header"><a href="/base/algorithm.html#深拷贝" class="sidebar-link">深拷贝</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/algorithm.html#数组去重" class="sidebar-link">数组去重</a></li><li class="sidebar-sub-header"><a href="/base/algorithm.html#实现36进制转换" class="sidebar-link">实现36进制转换</a></li><li class="sidebar-sub-header"><a href="/base/algorithm.html#数组展评" class="sidebar-link">数组展评</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/algorithm.html#二维数组展开" class="sidebar-link">二维数组展开</a></li><li class="sidebar-sub-header"><a href="/base/algorithm.html#多维数组展开-递归" class="sidebar-link">多维数组展开(递归)</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/algorithm.html#函数柯里化" class="sidebar-link">函数柯里化</a></li></ul></li><li><a href="/base/event-loop.html" aria-current="page" class="active sidebar-link">事件循环机制</a></li><li><a href="/base/page-performance.html" class="sidebar-link">页面性能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/page-performance.html#异步加载的方式" class="sidebar-link">异步加载的方式</a></li><li class="sidebar-sub-header"><a href="/base/page-performance.html#异步加载的区别" class="sidebar-link">异步加载的区别：</a></li><li class="sidebar-sub-header"><a href="/base/page-performance.html#浏览器缓存" class="sidebar-link">浏览器缓存：</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/page-performance.html#缓存分类" class="sidebar-link">缓存分类</a></li></ul></li></ul></li><li><a href="/base/error.html" class="sidebar-link">错误监控</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/error.html#前端错误的分类" class="sidebar-link">前端错误的分类</a></li><li class="sidebar-sub-header"><a href="/base/error.html#错误的捕获方式" class="sidebar-link">错误的捕获方式</a></li><li class="sidebar-sub-header"><a href="/base/error.html#处理方式" class="sidebar-link">处理方式</a></li><li class="sidebar-sub-header"><a href="/base/error.html#上报错误的基本原理" class="sidebar-link">上报错误的基本原理</a></li></ul></li><li><a href="/base/change-this.html" class="sidebar-link">改变函数对象中的this指向</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/change-this.html#箭头函数与普通函数的区别" class="sidebar-link">箭头函数与普通函数的区别</a></li><li class="sidebar-sub-header"><a href="/base/change-this.html#call-apply-bind" class="sidebar-link">call/apply/bind</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/change-this.html#区别" class="sidebar-link">区别</a></li><li class="sidebar-sub-header"><a href="/base/change-this.html#应用" class="sidebar-link">应用</a></li><li class="sidebar-sub-header"><a href="/base/change-this.html#自定义call、apply" class="sidebar-link">自定义call、apply</a></li><li class="sidebar-sub-header"><a href="/base/change-this.html#自定义bind" class="sidebar-link">自定义bind</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/change-this.html#其他自定义实现方式" class="sidebar-link">其他自定义实现方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/change-this.html#call" class="sidebar-link">call</a></li><li class="sidebar-sub-header"><a href="/base/change-this.html#apply" class="sidebar-link">apply</a></li><li class="sidebar-sub-header"><a href="/base/change-this.html#bind" class="sidebar-link">bind</a></li></ul></li></ul></li><li><a href="/base/debounce-throttle.html" class="sidebar-link">防抖和节流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/debounce-throttle.html#防抖debounce" class="sidebar-link">防抖debounce</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/debounce-throttle.html#概念" class="sidebar-link">概念</a></li><li class="sidebar-sub-header"><a href="/base/debounce-throttle.html#应用场景" class="sidebar-link">应用场景</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/debounce-throttle.html#节流throttle" class="sidebar-link">节流throttle</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/debounce-throttle.html#概念-2" class="sidebar-link">概念</a></li><li class="sidebar-sub-header"><a href="/base/debounce-throttle.html#应用场景-2" class="sidebar-link">应用场景</a></li></ul></li></ul></li><li><a href="/base/array.html" class="sidebar-link">数组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/array.html#数组声明式系列方法" class="sidebar-link">数组声明式系列方法</a></li><li class="sidebar-sub-header"><a href="/base/array.html#数组去重-unique" class="sidebar-link">数组去重(unique)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/array.html#利用foreach-和indexof" class="sidebar-link">利用forEach()和indexOf()</a></li><li class="sidebar-sub-header"><a href="/base/array.html#利用foreach-对象容器" class="sidebar-link">利用forEach() + 对象容器</a></li><li class="sidebar-sub-header"><a href="/base/array.html#利用es6语法-from-set-或者-set" class="sidebar-link">利用ES6语法: from + Set 或者 ... + Set</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/array.html#数组合并-concat-与切片-slice" class="sidebar-link">数组合并(concat)与切片(slice)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/array.html#合并concat" class="sidebar-link">合并concat()</a></li><li class="sidebar-sub-header"><a href="/base/array.html#切片slice" class="sidebar-link">切片slice()</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/array.html#数组扁平化-flatten" class="sidebar-link">数组扁平化(flatten)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/array.html#理解" class="sidebar-link">理解</a></li><li class="sidebar-sub-header"><a href="/base/array.html#实现" class="sidebar-link">实现</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/array.html#数组取真与分块" class="sidebar-link">数组取真与分块</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/array.html#compact-array" class="sidebar-link">compact(array)</a></li><li class="sidebar-sub-header"><a href="/base/array.html#chunk-array-size" class="sidebar-link">chunk(array, size)</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/array.html#数组取差异与合并" class="sidebar-link">数组取差异与合并</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/array.html#difference-arr1-arr2" class="sidebar-link">difference(arr1, arr2)</a></li><li class="sidebar-sub-header"><a href="/base/array.html#mergearray-arr1-arr2" class="sidebar-link">mergeArray(arr1, arr2)</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/array.html#删除数组中部分元素" class="sidebar-link">删除数组中部分元素</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/array.html#pull-array-values" class="sidebar-link">pull(array, ...values)</a></li><li class="sidebar-sub-header"><a href="/base/array.html#pullall-array-values" class="sidebar-link">pullAll(array, values)</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/array.html#得到数组的部分元素" class="sidebar-link">得到数组的部分元素</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/array.html#drop-array-count" class="sidebar-link">drop(array, count)</a></li><li class="sidebar-sub-header"><a href="/base/array.html#dropright-array-count" class="sidebar-link">dropRight(array, count)</a></li></ul></li></ul></li><li><a href="/base/object.html" class="sidebar-link">对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/object.html#自定义new和instanceof工具函数" class="sidebar-link">自定义new和instanceof工具函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/object.html#自定义new工具函数" class="sidebar-link">自定义new工具函数</a></li><li class="sidebar-sub-header"><a href="/base/object.html#自定义instanceof工具函数" class="sidebar-link">自定义instanceof工具函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/object.html#合并多个对象" class="sidebar-link">合并多个对象</a></li><li class="sidebar-sub-header"><a href="/base/object.html#对象-数组拷贝" class="sidebar-link">对象/数组拷贝</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/object.html#浅拷贝" class="sidebar-link">浅拷贝</a></li><li class="sidebar-sub-header"><a href="/base/object.html#深拷贝" class="sidebar-link">深拷贝</a></li></ul></li></ul></li><li><a href="/base/string.html" class="sidebar-link">字符串</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/string.html#字符串倒序" class="sidebar-link">字符串倒序</a></li><li class="sidebar-sub-header"><a href="/base/string.html#字符串是否是回文" class="sidebar-link">字符串是否是回文</a></li><li class="sidebar-sub-header"><a href="/base/string.html#截取字符串" class="sidebar-link">截取字符串</a></li></ul></li><li><a href="/base/es6.html" class="sidebar-link">es6</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/es6.html#symbol" class="sidebar-link">Symbol</a></li><li class="sidebar-sub-header"><a href="/base/es6.html#map和weakmap的区别" class="sidebar-link">Map和Weakmap的区别</a></li><li class="sidebar-sub-header"><a href="/base/es6.html#promise" class="sidebar-link">Promise</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/es6.html#reject和catch" class="sidebar-link">reject和catch</a></li><li class="sidebar-sub-header"><a href="/base/es6.html#手写promise" class="sidebar-link">手写promise</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="事件循环机制"><a href="#事件循环机制" class="header-anchor">#</a> 事件循环机制</h1> <p><a href="https://www.infoq.cn/article/CS9-WZQlNR5h05HHDo1b" target="_blank" rel="noopener noreferrer">浏览器是多进程的<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，每个tab页都相当于是一个浏览器的进程（进程（process）是cpu资源分配的最小单位，线程（thread）是cpu调度的最小单位，线程是建立在进程的基础上的一次程序运行单位，一个进程中可以有多个线程）</p> <p>浏览器有哪些进程：</p> <ul><li>Browser Process</li> <li>GPU Process</li> <li>Plugin Process</li> <li>Renderer Process</li> <li>Device Process</li> <li>Storage Process</li> <li>Network Process</li> <li>UI Process</li></ul> <p>JavaScript是<strong>单线程</strong>执行的，所谓的单线程就是指一次只能完成一个任务，如果是多个任务就必须要排队执行，前面一个任务执行完毕之后，再执行后面一个任务。（因为js引擎的主线程负责代码的运行，有且只有一个主线程）</p> <p>缺点：如果一个任务耗时较长，后面的任务就必须排队等着，容易造成浏览器无响应（假死）</p> <p>解决方案：JavaScript将执行模式分为两种：同步任务（Synchronous）和异步任务（Asynchronous）</p> <p>同步任务：后一个任务等待前一个任务执行结束在执行</p> <p>异步任务：每个异步任务都有一个或多个回调函数（callback），前一个任务结束后，不是执行后一个任务，而是执行后一个任务的回到函数。异步任务相关的回调函数会被放入任务队列（callback queue），当主线程中的执行栈被清空时，去任务队列中取任务到执行栈中执行</p> <ul><li>javascript是单线程语言，一个线程里只有一个调用栈（call stack）</li> <li>单线程：一次只能做一件事</li> <li>js执行，任务进入调用栈，同步任务进入主线程，异步任务进入事件队列，待主线程中的同步任务执行完毕之后，清空调用栈，事件循环检测主线程是否清空，如果清空，依次从执行任务队列中取任务到调用栈中执行，执行完毕，清空调用栈</li></ul> <ol><li><p>JavaScript 引擎是单线程，也就是说每次只能执行一项任务，其他任务都得按照顺序排队等待被执行，只有当前的任务执行完成之后才会往下执行下一个任务。</p></li> <li><p>js又分为同步任务和异步任务</p></li> <li><p>同步任务：在主线程(这里的主线程就是JS引擎线程)上执行，会形成一个执行栈</p></li> <li><p>异步任务：宏任务（macrotask，也被成为task）和微任务（microtask，也被成为jobs）</p> <p>宏任务包括：</p> <ul><li>主代码块</li> <li>setTimeout</li> <li>setInterval</li> <li>setImmediate ()-Node</li> <li>requestAnimationFrame ()-浏览器</li></ul> <p>微任务包括：</p> <ul><li>process.nextTick ()-Node</li> <li>Promise.then()</li> <li>catch</li> <li>finally</li> <li>Object.observe</li> <li>MutationObserver</li></ul></li></ol> <p>题目：同步任务和异步任务的执行顺序</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

结果：<span class="token number">1</span>，<span class="token number">2</span>，<span class="token number">3</span>
</code></pre></div><p>单线程：同一个时间只能做一个事情</p> <p>任务队列：包括同步任务（console）、异步任务（setTimeout，setInterval），同步任务处理完之后执行异步任务</p> <p>题目：</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">)</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">)</span>
<span class="token comment">// 结果: A</span>
</code></pre></div><p>题目：</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// 结果: A</span>
</code></pre></div><p>题目：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 或者</span>
 <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
结果：打印四次<span class="token number">4</span>
</code></pre></div><p>解析：队列插入时间，for循环执行到setTimeout时，并没有将setTimeout放置到异步队列中去，只有当定时器的时间到了，才会将setTimeout放置到异步队列，等待事件循环，执行setTimeout，此时i已经变为4</p> <ul><li><p>如何理解js的单线程：一个时间之内，js只能做一件事</p></li> <li><p>什么是任务队列：同步任务和异步任务</p></li> <li><p>什么是Event Loop</p></li> <li><p>异步任务：</p> <ul><li><p>setTimeout和setInterval</p></li> <li><p>DOM事件</p></li> <li><p>ES6中的Promise</p></li></ul></li></ul> <p>题目：</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 end'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async2 end'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Promise'</span><span class="token punctuation">)</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span>

<span class="token comment">// script start =&gt; async2 end =&gt; Promise =&gt; script end =&gt; promise1 =&gt; promise2 =&gt; async1 end =&gt; setTimeout</span>

<span class="token comment">// 新版本浏览器的执行顺序如下：因为 await 变快了</span>
<span class="token comment">// script start =&gt; async2 end =&gt; Promise =&gt; script end =&gt; async1 end =&gt; promise1 =&gt; promise2 =&gt;setTimeout</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021-05-17 14:29:39</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/base/algorithm.html" class="prev">
        算法类
      </a></span> <span class="next"><a href="/base/page-performance.html">
        页面性能
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.a68e905e.js" defer></script><script src="/assets/js/2.545454b5.js" defer></script><script src="/assets/js/29.9876f7ff.js" defer></script>
  </body>
</html>
