import{_ as n,o as s,c as a,d as t}from"./app.e7c60155.js";const p={},o=t(`<h1 id="canvas\u81EA\u5B9A\u4E49\u4EEA\u8868\u76D8" tabindex="-1"><a class="header-anchor" href="#canvas\u81EA\u5B9A\u4E49\u4EEA\u8868\u76D8" aria-hidden="true">#</a> canvas\u81EA\u5B9A\u4E49\u4EEA\u8868\u76D8</h1><ul class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> \u523B\u5EA6\u7EBF\u53CA\u523B\u5EA6\u503C</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> \u5F53\u524D\u503C\u663E\u793A</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> \u4EFB\u610F\u8D77\u59CB\u7EC8\u6B62\u89D2\u5EA6</li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> \u5F53\u524D\u503C\u52A8\u753B</li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Gauge</span> <span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> opt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>ctx <span class="token operator">=</span> ctx
		<span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> opt<span class="token punctuation">.</span>width
		<span class="token keyword">this</span><span class="token punctuation">.</span>min <span class="token operator">=</span> opt<span class="token punctuation">.</span>min
		<span class="token keyword">this</span><span class="token punctuation">.</span>max <span class="token operator">=</span> opt<span class="token punctuation">.</span>max
		<span class="token keyword">this</span><span class="token punctuation">.</span>curValue <span class="token operator">=</span> opt<span class="token punctuation">.</span>value
		<span class="token keyword">this</span><span class="token punctuation">.</span>unit <span class="token operator">=</span> opt<span class="token punctuation">.</span>unit

		<span class="token keyword">this</span><span class="token punctuation">.</span>tickLength <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>max <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>min
		<span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>radius <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span>

		<span class="token comment">// \u8F68\u9053</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>trackLineWidth <span class="token operator">=</span> <span class="token number">10</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>trackRadius <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>radius <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>trackLineWidth <span class="token operator">/</span> <span class="token number">2</span>

		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>
	<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>radius<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>radius<span class="token punctuation">)</span>
		<span class="token comment">// \u5C06\u5750\u6807\u4E2D\u5FC3\u70B9\u79FB\u52A8\u5230\u5706\u5FC3\u4F4D\u7F6E</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>radius<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>radius<span class="token punctuation">)</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">drawTrack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">drawProgress</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">drawTick</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">drawTickLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

		<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token function">drawTrack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>trackLineWidth
		<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">&#39;#ddd&#39;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>trackRadius<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">degToRad</span><span class="token punctuation">(</span><span class="token number">135</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">degToRad</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

		<span class="token comment">// \u4E2D\u95F4\u6587\u672C</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&#39;#FFAB91&#39;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>textAlign <span class="token operator">=</span> <span class="token string">&#39;center&#39;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">&quot;34px serif&quot;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token keyword">this</span><span class="token punctuation">.</span>curValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token keyword">this</span><span class="token punctuation">.</span>unit<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

		<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token function">drawProgress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> curValueRad <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCurValueRad</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>trackLineWidth
		<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">&#39;#FD7347&#39;</span>
		<span class="token comment">// \u7EC8\u70B9\u89D2\u5EA6\u662F\u52A8\u6001\u7684</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>trackRadius<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">degToRad</span><span class="token punctuation">(</span><span class="token number">135</span><span class="token punctuation">)</span><span class="token punctuation">,</span> curValueRad<span class="token punctuation">)</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>
	<span class="token function">drawTick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// \u4E0D\u53EF\u662F\u4F7F\u7528\u65CB\u8F6C\uFF0C\u5426\u5219\u6587\u5B57\u4E5F\u4F1A\u65CB\u8F6C</span>
		<span class="token keyword">let</span> deg <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">degToRad</span><span class="token punctuation">(</span><span class="token number">135</span><span class="token punctuation">)</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>min<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>max<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">1</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">&#39;#999&#39;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token comment">// \u523B\u5EA6\u8D77\u70B9</span>
			<span class="token keyword">let</span> x0 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>radius <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>trackLineWidth <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>deg<span class="token punctuation">)</span>
			<span class="token keyword">let</span> y0 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>radius <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>trackLineWidth <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>deg<span class="token punctuation">)</span>
			<span class="token comment">// \u523B\u5EA6\u7EC8\u70B9</span>
			<span class="token keyword">var</span> x1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>radius <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>trackLineWidth <span class="token operator">-</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>deg<span class="token punctuation">)</span>
			<span class="token keyword">var</span> y1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>radius <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>trackLineWidth <span class="token operator">-</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>deg<span class="token punctuation">)</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>x0<span class="token punctuation">,</span> y0<span class="token punctuation">)</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span> y1<span class="token punctuation">)</span>
			deg <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tickRad
			<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span>
	<span class="token function">drawTickLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">let</span> deg <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">degToRad</span><span class="token punctuation">(</span><span class="token number">135</span><span class="token punctuation">)</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>min<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>max<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>radius <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>trackLineWidth <span class="token operator">-</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>deg<span class="token punctuation">)</span>
			<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>radius <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>trackLineWidth <span class="token operator">-</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>deg<span class="token punctuation">)</span>
			deg <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tickRad
			<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">&#39;12px serif&#39;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&#39;#999&#39;</span>
			<span class="token comment">// \u4E0D\u8BBE\u7F6E\u4F1A\u4E0Etick\u9519\u4F4D</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">&#39;middle&#39;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span>
	<span class="token comment">// \u89D2\u5EA6\u8F6C\u5316\u4E3A\u5F27\u5EA6</span>
	<span class="token function">degToRad</span><span class="token punctuation">(</span><span class="token parameter">deg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> deg <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// \u5F53\u524D\u503C\u7684\u5F27\u5EA6</span>
	<span class="token function">getCurValueRad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// \u6BCF\u4E2A\u523B\u5EA6\u7684\u5F27\u5EA6\uFF0C\u5706\u5F27\u5F00\u53E3\u89D2\u5EA6\uFF1A 360-90 = 270</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>tickRad <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">degToRad</span><span class="token punctuation">(</span><span class="token number">270</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tickLength
		<span class="token comment">// \u8D85\u51FA</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>curValue <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>max<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>max <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>min<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tickRad <span class="token operator">+</span> <span class="token number">3</span> <span class="token operator">/</span> <span class="token number">4</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>curValue <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>min<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tickRad <span class="token operator">+</span> <span class="token number">3</span> <span class="token operator">/</span> <span class="token number">4</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Gauge

</code></pre></div>`,3),c=[o];function e(k,u){return s(),a("div",null,c)}var i=n(p,[["render",e],["__file","gauge.html.vue"]]);export{i as default};
