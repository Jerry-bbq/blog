import{_ as n,o as a,c as s,e as t}from"./app.d10a1e38.js";const p={},o=t(`<h1 id="keep-alive\u7684\u771F\u5B9E\u573A\u666F\u5E94\u7528" tabindex="-1"><a class="header-anchor" href="#keep-alive\u7684\u771F\u5B9E\u573A\u666F\u5E94\u7528" aria-hidden="true">#</a> keep-alive\u7684\u771F\u5B9E\u573A\u666F\u5E94\u7528</h1><h2 id="\u4E1A\u52A1\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#\u4E1A\u52A1\u573A\u666F" aria-hidden="true">#</a> \u4E1A\u52A1\u573A\u666F</h2><p>\u7531\u4E8E\u5217\u8868\u9875\u9762\u9700\u8981\u7528\u6237\u7B5B\u9009\u7684\u6761\u4EF6\u592A\u591A\uFF0C\u4ECE\u5217\u8868\u9875\u8FDB\u5165\u8BE6\u60C5\u9875\uFF0C\u5728\u4ECE\u8BE6\u60C5\u9875\u8FD4\u56DE\u5230\u5217\u8868\u9875\u65F6\uFF0C\u6570\u636E\u5237\u65B0\uFF0C\u8FD9\u6837\u5C31\u9020\u6210\u4E86\u7528\u6237\u9700\u8981\u91CD\u65B0\u53BB\u9009\u62E9\u7B5B\u9009\u6761\u4EF6\uFF08\u8981\u6C42\u5217\u8868\u9875\u9762\u8DF3\u8F6C\u8BE6\u60C5\u9875\uFF0C\u8FD4\u56DE\u65F6\u5217\u8868\u9875\u9762\u6570\u636E\u548C\u6EDA\u52A8\u4F4D\u7F6E\u7F13\u5B58\uFF09</p><h2 id="\u9700\u6C42" tabindex="-1"><a class="header-anchor" href="#\u9700\u6C42" aria-hidden="true">#</a> \u9700\u6C42</h2><ol><li>\u4ECE\u8BE6\u60C5\u9875\u8FD4\u56DE\u5217\u8868\u9875\u65F6\u4FDD\u7559\u7528\u6237\u9009\u62E9\u548C\u586B\u5199\u7684\u6570\u636E</li><li>\u9875\u9762\u505C\u7559\u5728\u539F\u6765\u6EDA\u52A8\u7684\u4F4D\u7F6E</li><li>\u5728\u8BE6\u60C5\u9875\u5BF9\u5355\u6761\u6570\u636E\u8FDB\u884C\u64CD\u4F5C\u4E4B\u540E\uFF0C\u8981\u6C42\u8FD4\u56DE\u5217\u8868\u9875\u65F6\uFF0C\u53EA\u66F4\u65B0\u5355\u6761\u6570\u636E\u7684\u7684\u4FE1\u606F</li></ol><h2 id="\u95EE\u9898\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#\u95EE\u9898\u5206\u6790" aria-hidden="true">#</a> \u95EE\u9898\u5206\u6790</h2><p>\u7EC4\u4EF6\u5207\u6362\u65F6\uFF0CDOM\u91CD\u65B0\u6E32\u67D3\uFF0C\u5BFC\u81F4\u6570\u636E\u5237\u65B0</p><h2 id="\u6280\u672F\u65B9\u6848" tabindex="-1"><a class="header-anchor" href="#\u6280\u672F\u65B9\u6848" aria-hidden="true">#</a> \u6280\u672F\u65B9\u6848</h2><ol><li>\u4F7F\u7528vue\u7684\u5185\u7F6E\u7EC4\u4EF6keep-alive\uFF0C\u5C06\u72B6\u6001\u4FDD\u5B58\u5728\u5185\u5B58\u4E2D\uFF0C\u9632\u6B62\u91CD\u590D\u6E32\u67D3DOM,\u7ED3\u5408router\u7684meta\u5C5E\u6027\uFF0C\u7F13\u5B58\u90E8\u5206\u9875\u9762</li><li>\u4F7F\u7528keep-alive\u751F\u547D\u5468\u671F\u94A9\u5B50\u51FD\u6570\uFF1Aactivated\uFF0C\u66F4\u65B0\u5355\u6761\u6570\u636E</li><li>\u8FDB\u5165\u8BE6\u60C5\u9875\u9762\u65F6\uFF0C\u7F13\u5B58DOM\u5143\u7D20\u7684scrollTop\uFF0C\u8FD4\u56DE\u91CD\u65B0\u8BBE\u7F6EscrollTop\u89E3\u51B3\u9875\u9762\u8FD4\u56DE\u65F6\u6EDA\u52A8\u7684\u4F4D\u7F6E</li></ol><h2 id="\u5177\u4F53\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#\u5177\u4F53\u5B9E\u73B0" aria-hidden="true">#</a> \u5177\u4F53\u5B9E\u73B0</h2><ol><li>main.vue\u9875\u9762</li></ol><div class="language-vue ext-vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>\u66FF\u6362\u4E3A\uFF1A</p><div class="language-vue ext-vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$route.meta.keepAlive<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!$route.meta.keepAlive<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="2"><li>\u8BBE\u7F6E\u9700\u8981\u7F13\u5B58\u8DEF\u7531\u7684keepAlive\u5C5E\u6027</li></ol><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/list&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span> list<span class="token punctuation">,</span>
    <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">keepAlive</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">refresh</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">beforeEnter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5224\u65AD\u662F\u4E0D\u662F\u4ECE\u8BE6\u60C5\u9875\u8FD4\u56DE\u7684</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>from<span class="token punctuation">.</span>path <span class="token operator">===</span> <span class="token string">&#39;/detail&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>keepAlive <span class="token operator">=</span> <span class="token boolean">true</span>
        to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>refresh <span class="token operator">=</span> <span class="token boolean">true</span>
        to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>id <span class="token operator">=</span> from<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id
    <span class="token punctuation">}</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ol start="3"><li>\u8BBE\u7F6E\u9875\u9762\u7684srollTop\u5E76\u66F4\u65B0\u5355\u6761\u6570\u636E</li></ol><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">// \u4ECE\u4F8B\u5B50\u8BE6\u60C5\u9875\u8FD4\u56DE\uFF0C\u66F4\u65B0\u672C\u6761\u4F8B\u5B50\u4FE1\u606F</span>
<span class="token function">activated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>refresh<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u6EDA\u52A8\u5230\u539F\u6765\u7684\u4F4D\u7F6E</span>
    <span class="token keyword">let</span> scrollToTop <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&#39;scrollToTop&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">&#39;container&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> scrollToTop

    <span class="token comment">// \u904D\u5386\u66F4\u65B0</span>
    <span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>id
    <span class="token function">getListDetail</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span> id<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span>code<span class="token punctuation">,</span> data<span class="token punctuation">}</span> <span class="token operator">=</span> res
    <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>val<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>\u8FDB\u5165\u8BE6\u60C5\u9875\u65F6\u7F13\u5B58dom\u5143\u7D20\u7684scrollTop</li></ol><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">// \u67E5\u770B\u8BE6\u60C5</span>
<span class="token function">_handleDetail</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> scrollToTop <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">&#39;container&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>scrollTop
    sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&#39;scrollToTop&#39;</span><span class="token punctuation">,</span> scrollToTop<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div>`,20),e=[o];function c(l,u){return a(),s("div",null,e)}var k=n(p,[["render",c],["__file","keep-alive.html.vue"]]);export{k as default};
