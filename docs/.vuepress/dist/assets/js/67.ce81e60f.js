(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{514:function(t,s,a){"use strict";a.r(s);var n=a(26),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"错误监控"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#错误监控"}},[t._v("#")]),t._v(" 错误监控")]),t._v(" "),a("h2",{attrs:{id:"前端错误的分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端错误的分类"}},[t._v("#")]),t._v(" 前端错误的分类")]),t._v(" "),a("ul",[a("li",[t._v("即时运行错误：代码错误")]),t._v(" "),a("li",[t._v("资源加载错误：js，css，图片加载等错误")])]),t._v(" "),a("h2",{attrs:{id:"错误的捕获方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#错误的捕获方式"}},[t._v("#")]),t._v(" 错误的捕获方式")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("即时运行错误的捕获方式：")]),t._v(" "),a("ul",[a("li",[t._v("try...catch")]),t._v(" "),a("li",[t._v("window.onerror")])])]),t._v(" "),a("li",[a("p",[t._v("资源加载错误的捕获方式：")]),t._v(" "),a("ul",[a("li",[t._v("object.onerror")]),t._v(" "),a("li",[t._v("performance.getEntries()，返回一个数组")]),t._v(" "),a("li",[t._v("Error事件捕获")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'捕获错误'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])])]),t._v(" "),a("p",[t._v("问：跨域的js运行错误可以捕获嘛，错误提示什么，应该怎么处理？")]),t._v(" "),a("p",[t._v("答：可以捕获到错误信息，拿不到如下信息：出错文件，出错行号，出错列号，错误信息")]),t._v(" "),a("h2",{attrs:{id:"处理方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#处理方式"}},[t._v("#")]),t._v(" 处理方式")]),t._v(" "),a("ol",[a("li",[t._v("在script标签增加"),a("code",[t._v("crossorigin")]),t._v("属性")]),t._v(" "),a("li",[t._v("设置js资源响应头"),a("code",[t._v("Access-Control-Allow-Origin:*")])])]),t._v(" "),a("h2",{attrs:{id:"上报错误的基本原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#上报错误的基本原理"}},[t._v("#")]),t._v(" 上报错误的基本原理")]),t._v(" "),a("ol",[a("li",[t._v("采用Ajax通信的方式上报")]),t._v(" "),a("li",[t._v("利用Image对象上报（所有的监控系统都是基于此来做的）")])])])}),[],!1,null,null,null);s.default=r.exports}}]);