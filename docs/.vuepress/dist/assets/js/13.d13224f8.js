(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{490:function(t,a,e){t.exports=e.p+"assets/img/layers.7ba7cd1c.png"},491:function(t,a,e){t.exports=e.p+"assets/img/flow.71f429bb.png"},492:function(t,a,e){t.exports=e.p+"assets/img/webkitflow.85a66640.png"},493:function(t,a,e){t.exports=e.p+"assets/img/image008.b074db49.jpeg"},574:function(t,a,e){"use strict";e.r(a);var r=e(35),s=Object(r.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"浏览器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#浏览器"}},[t._v("#")]),t._v(" 浏览器")]),t._v(" "),r("p",[t._v("浏览器的引擎主要分为渲染引擎（布局引擎）和JavaScript引擎")]),t._v(" "),r("h2",{attrs:{id:"浏览器的高层组件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#浏览器的高层组件"}},[t._v("#")]),t._v(" 浏览器的高层组件")]),t._v(" "),r("p",[r("img",{attrs:{src:e(490),alt:"layers"}})]),t._v(" "),r("ul",[r("li",[t._v("User interface：用户界面，包括地址栏、前进后退按钮、书签等")]),t._v(" "),r("li",[t._v("Browser engine：浏览器引擎，在用户界面和渲染引擎之间传送指令")]),t._v(" "),r("li",[t._v("Rendering engine：渲染引擎，负责显示请求的内容，如解析HTML、CSS内容，并将解析后的内容显示在屏幕上")]),t._v(" "),r("li",[t._v("Networking：网络，用于网络调用，比如HTTP请求")]),t._v(" "),r("li",[t._v("UI backend：用户界面后端，用于绘制基础的窗口小部件，比如组合框和窗口")]),t._v(" "),r("li",[t._v("JavaScript interpreter：javascript解释器，用于解析和执行javascript代码")]),t._v(" "),r("li",[t._v("Data storage：数据存储，如cookie")])]),t._v(" "),r("p",[t._v("和大多数浏览器不同，chrome浏览器的每一个标签都分别对应一个渲染引擎，每个标签都是一个独立的进程")]),t._v(" "),r("h2",{attrs:{id:"渲染引擎"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#渲染引擎"}},[t._v("#")]),t._v(" 渲染引擎")]),t._v(" "),r("p",[t._v("市面上浏览器的渲染引擎大概有如下四类：")]),t._v(" "),r("ul",[r("li",[t._v("Trident内核: IE")]),t._v(" "),r("li",[t._v("Gecko内核: FireFox")]),t._v(" "),r("li",[t._v("Presto内核: Opera7")]),t._v(" "),r("li",[t._v("WebKit内核: Chrome、Safari")])]),t._v(" "),r("p",[t._v("打开浏览器的控制台，通过"),r("code",[t._v("navigator.userAgent")]),t._v("查看不同浏览器内核：")]),t._v(" "),r("div",{staticClass:"language-js line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// chrome")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36'")]),t._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// firefox")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.0; rv:57.0) Gecko/20100101 Firefox/57.0"')]),t._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// safari")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.2 Safari/605.1.15"')]),t._v("\n")])]),t._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[t._v("1")]),r("br"),r("span",{staticClass:"line-number"},[t._v("2")]),r("br"),r("span",{staticClass:"line-number"},[t._v("3")]),r("br"),r("span",{staticClass:"line-number"},[t._v("4")]),r("br"),r("span",{staticClass:"line-number"},[t._v("5")]),r("br"),r("span",{staticClass:"line-number"},[t._v("6")]),r("br"),r("span",{staticClass:"line-number"},[t._v("7")]),r("br"),r("span",{staticClass:"line-number"},[t._v("8")]),r("br")])]),r("h3",{attrs:{id:"渲染引擎的主流程"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#渲染引擎的主流程"}},[t._v("#")]),t._v(" 渲染引擎的主流程")]),t._v(" "),r("p",[r("img",{attrs:{src:e(491),alt:"flow"}})]),t._v(" "),r("ul",[r("li",[t._v("解析HTML文档为DOM节点，同时也会解析CSS文件，创建一个渲染树")]),t._v(" "),r("li",[t._v("渲染树中包含多个视觉属性（如颜色和尺寸）的矩形，这些矩形的排列顺序就是它们将在屏幕上显示的顺序")]),t._v(" "),r("li",[t._v("渲染树构建完成之后，进入「布局」处理阶段，也就是每个节点分配一个应出现在屏幕上的确切坐标")]),t._v(" "),r("li",[t._v("最后是「绘制」阶段，渲染引擎遍历渲染树，由用户界面后端层将每个节点绘制出来")])]),t._v(" "),r("p",[t._v("渲染引擎不必等到整个HTML文档解析完毕之后，就会开始构建渲染树和设置布局，在不断接受和处理来自网络的其余内容的同时，渲染引擎会将部分内容解析并显示出来")]),t._v(" "),r("h3",{attrs:{id:"渲染引擎的主流程示例"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#渲染引擎的主流程示例"}},[t._v("#")]),t._v(" 渲染引擎的主流程示例")]),t._v(" "),r("p",[t._v("Webkit主流程:")]),t._v(" "),r("p",[r("img",{attrs:{src:e(492),alt:"webkitflow"}})]),t._v(" "),r("p",[t._v("Gecko渲染引擎主流程：")]),t._v(" "),r("p",[r("img",{attrs:{src:e(493),alt:"image008"}})]),t._v(" "),r("p",[t._v("虽然 WebKit 和 Gecko 使用的术语略有不同，但整体流程是基本相同的。")]),t._v(" "),r("p",[t._v("Gecko 将视觉格式化元素组成的树称为“框架树”。每个元素都是一个框架。WebKit 使用的术语是“渲染树”，它由“渲染对象”组成。对于元素的放置，WebKit 使用的术语是“布局”，而 Gecko 称之为“重排”。对于连接 DOM 节点和可视化信息从而创建渲染树的过程，WebKit 使用的术语是“附加”。有一个细微的非语义差别，就是 Gecko 在 HTML 与 DOM 树之间还有一个称为“内容槽”的层，用于生成 DOM 元素")]),t._v(" "),r("h3",{attrs:{id:"解析parsing"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#解析parsing"}},[t._v("#")]),t._v(" 解析Parsing")]),t._v(" "),r("p",[t._v("解析文档是指将文档转为有意义的的结构，也就是可以让代码理解和使用的结构，解析得到的结果通常代表了文档结构的节点树，它也可称为解析树或者语法树。")]),t._v(" "),r("p",[t._v("解析是以文档遵循的的语法规则为基础。所有可以解析的格式都必须对应确定的语法。")]),t._v(" "),r("p",[t._v("解析的过程分为两个子过程：词法分析和语法分析")]),t._v(" "),r("p",[t._v("HTML 解析器的任务是将 HTML 标记解析成解析树。")]),t._v(" "),r("p",[t._v("HTML 语法定义，HTML 的词汇和语法在 W3C 组织创建的规范中进行了定义")]),t._v(" "),r("p",[t._v("HTML 的定义采用了 DTD 格式，DTD 存在一些变体。严格模式完全遵守 HTML 规范，而其他模式可支持以前的浏览器所使用的标记")]),t._v(" "),r("p",[t._v("解析器的输出“解析树”是由 DOM 元素和属性节点构成的树结构。DOM 是文档对象模型 (Document Object Model) 的缩写。它是 HTML 文档的对象表示，同时也是外部内容（例如 JavaScript）与 HTML 元素之间的接口。\n解析树的根节点是“Document”对象。")]),t._v(" "),r("h2",{attrs:{id:"javascript引擎"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#javascript引擎"}},[t._v("#")]),t._v(" JavaScript引擎")]),t._v(" "),r("p",[t._v("JavaScript引擎是执行JavaScript代码的软件组织。JavaScript引擎通常由浏览器供应商开发，也就是每个浏览器的JavaScript引擎多多少少都有一些区别。JavaScript引擎不仅局限于浏览器，例如V8引擎和Deno运行时系统")]),t._v(" "),r("p",[t._v("JavaScript引擎的作用就是用来运行JavaScript代码")]),t._v(" "),r("h2",{attrs:{id:"参考"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#The_rendering_engine",target:"_blank",rel:"noopener noreferrer"}},[t._v("浏览器的工作原理：新式网络浏览器幕后揭秘"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://gs.statcounter.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("StatCounter 浏览器统计数据"),r("OutboundLink")],1),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://gs.statcounter.com/browser-market-share/desktop/china",target:"_blank",rel:"noopener noreferrer"}},[t._v("中国桌面端浏览器市场份额"),r("OutboundLink")],1)])])])])])}),[],!1,null,null,null);a.default=s.exports}}]);