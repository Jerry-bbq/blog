<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.48">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/logo.png"><title>性能优化 | Blog</title><meta name="description" content="技术博客">
    <link rel="modulepreload" href="/blog/assets/app.c5e3b20f.js"><link rel="modulepreload" href="/blog/assets/page-performance.html.f9b6b6fb.js"><link rel="modulepreload" href="/blog/assets/page-performance.html.a35e1181.js"><link rel="prefetch" href="/blog/assets/index.html.7b7701d0.js"><link rel="prefetch" href="/blog/assets/index.html.56db72c5.js"><link rel="prefetch" href="/blog/assets/index.html.c75b350f.js"><link rel="prefetch" href="/blog/assets/babel.html.fe2fe1a3.js"><link rel="prefetch" href="/blog/assets/index.html.9e3e7c00.js"><link rel="prefetch" href="/blog/assets/index.html.dea0ecda.js"><link rel="prefetch" href="/blog/assets/index.html.2b2d5a56.js"><link rel="prefetch" href="/blog/assets/index.html.77c9d834.js"><link rel="prefetch" href="/blog/assets/gauge.html.f2542107.js"><link rel="prefetch" href="/blog/assets/hexo.html.b6e91d33.js"><link rel="prefetch" href="/blog/assets/tool-library.html.dcc25b5a.js"><link rel="prefetch" href="/blog/assets/index.html.3127970e.js"><link rel="prefetch" href="/blog/assets/algorithm-complexity.html.9b94afcf.js"><link rel="prefetch" href="/blog/assets/algorithm-skill.html.8dc0120e.js"><link rel="prefetch" href="/blog/assets/array.html.b9e0dc4e.js"><link rel="prefetch" href="/blog/assets/avl-tree.html.0e2e2be6.js"><link rel="prefetch" href="/blog/assets/bst.html.cad373a9.js"><link rel="prefetch" href="/blog/assets/circular-linked-list.html.220d7880.js"><link rel="prefetch" href="/blog/assets/dictionary.html.2f66480f.js"><link rel="prefetch" href="/blog/assets/doubly-linked-list.html.827a32ea.js"><link rel="prefetch" href="/blog/assets/graph.html.d3d5f8e5.js"><link rel="prefetch" href="/blog/assets/linked-list.html.17d43f54.js"><link rel="prefetch" href="/blog/assets/minHeap.html.805f0010.js"><link rel="prefetch" href="/blog/assets/queue.html.859ec74e.js"><link rel="prefetch" href="/blog/assets/recursive.html.7ae0d4c3.js"><link rel="prefetch" href="/blog/assets/red-black-tree.html.d5a8e3cb.js"><link rel="prefetch" href="/blog/assets/set.html.4b862429.js"><link rel="prefetch" href="/blog/assets/sort-and-search.html.b6126a10.js"><link rel="prefetch" href="/blog/assets/sorted-linked-list.html.7bf11543.js"><link rel="prefetch" href="/blog/assets/stack-linked-list.html.c4fb351f.js"><link rel="prefetch" href="/blog/assets/stack.html.19204a11.js"><link rel="prefetch" href="/blog/assets/animation.html.b34f0878.js"><link rel="prefetch" href="/blog/assets/bfc.html.fe6fc563.js"><link rel="prefetch" href="/blog/assets/box-model.html.2687fc1e.js"><link rel="prefetch" href="/blog/assets/center.html.add42934.js"><link rel="prefetch" href="/blog/assets/clear.html.81964aad.js"><link rel="prefetch" href="/blog/assets/flex.html.2ce5afb7.js"><link rel="prefetch" href="/blog/assets/layout.html.4f0d92ff.js"><link rel="prefetch" href="/blog/assets/other.html.c23363c8.js"><link rel="prefetch" href="/blog/assets/rem.html.6b2dd6b2.js"><link rel="prefetch" href="/blog/assets/index.html.bb7c3650.js"><link rel="prefetch" href="/blog/assets/canvas-svg.html.93421bc3.js"><link rel="prefetch" href="/blog/assets/doctype.html.96a0e1ba.js"><link rel="prefetch" href="/blog/assets/other.html.71452455.js"><link rel="prefetch" href="/blog/assets/painting.html.1d3ba33d.js"><link rel="prefetch" href="/blog/assets/reflow-repaint.html.b4825193.js"><link rel="prefetch" href="/blog/assets/rendering-engine.html.04ff15af.js"><link rel="prefetch" href="/blog/assets/array.html.170edd06.js"><link rel="prefetch" href="/blog/assets/asyn-single-thread.html.1d0f3611.js"><link rel="prefetch" href="/blog/assets/coding.html.0bdc941c.js"><link rel="prefetch" href="/blog/assets/communications.html.df2695b6.js"><link rel="prefetch" href="/blog/assets/data-type.html.b34d2f20.js"><link rel="prefetch" href="/blog/assets/dom.html.1ee3705f.js"><link rel="prefetch" href="/blog/assets/engineering.html.92b763cb.js"><link rel="prefetch" href="/blog/assets/error.html.f06a8a0a.js"><link rel="prefetch" href="/blog/assets/es6.html.92cc7e5e.js"><link rel="prefetch" href="/blog/assets/gc.html.2ca07a7f.js"><link rel="prefetch" href="/blog/assets/http.html.5afac21a.js"><link rel="prefetch" href="/blog/assets/object.html.838bb039.js"><link rel="prefetch" href="/blog/assets/prototype-chain.html.573aa047.js"><link rel="prefetch" href="/blog/assets/safe.html.41a8f29f.js"><link rel="prefetch" href="/blog/assets/scope-closure.html.688ab922.js"><link rel="prefetch" href="/blog/assets/string.html.361b400b.js"><link rel="prefetch" href="/blog/assets/index.html.e9acdb92.js"><link rel="prefetch" href="/blog/assets/v2.html.1c7eff29.js"><link rel="prefetch" href="/blog/assets/v4.html.95672b55.js"><link rel="prefetch" href="/blog/assets/v5.html.869d9e64.js"><link rel="prefetch" href="/blog/assets/index.html.7594694d.js"><link rel="prefetch" href="/blog/assets/index.html.2aed6aa2.js"><link rel="prefetch" href="/blog/assets/charles.html.4d0d1499.js"><link rel="prefetch" href="/blog/assets/git.html.a65170a5.js"><link rel="prefetch" href="/blog/assets/node-registry-manage.html.67968c8c.js"><link rel="prefetch" href="/blog/assets/node-version-manager.html.0022b3cc.js"><link rel="prefetch" href="/blog/assets/vue.html.e38ea0a9.js"><link rel="prefetch" href="/blog/assets/auto-deploy.html.f3dd0365.js"><link rel="prefetch" href="/blog/assets/download-by-url.html.14398ef7.js"><link rel="prefetch" href="/blog/assets/download.html.acf38336.js"><link rel="prefetch" href="/blog/assets/get-lastday.html.96dcb070.js"><link rel="prefetch" href="/blog/assets/parseInt.html.e7490a59.js"><link rel="prefetch" href="/blog/assets/scroll-into-view.html.d524275e.js"><link rel="prefetch" href="/blog/assets/tree-operate.html.24fb299d.js"><link rel="prefetch" href="/blog/assets/index.html.fc6aa45c.js"><link rel="prefetch" href="/blog/assets/app.html.5dc54496.js"><link rel="prefetch" href="/blog/assets/antd-vue-upload.html.213fb68a.js"><link rel="prefetch" href="/blog/assets/bind-string.html.9647e955.js"><link rel="prefetch" href="/blog/assets/component-loop.html.9916514d.js"><link rel="prefetch" href="/blog/assets/elementui-dialog.html.1444b442.js"><link rel="prefetch" href="/blog/assets/elementui-dynamic-table.html.a04a9beb.js"><link rel="prefetch" href="/blog/assets/elementui-table-auto-height.html.a78c1f96.js"><link rel="prefetch" href="/blog/assets/elementui-table-pagination.html.700e76f5.js"><link rel="prefetch" href="/blog/assets/fe-pagination.html.d67f9258.js"><link rel="prefetch" href="/blog/assets/gitlab.html.1f436243.js"><link rel="prefetch" href="/blog/assets/init-data.html.8844e5ea.js"><link rel="prefetch" href="/blog/assets/keep-alive.html.c3663190.js"><link rel="prefetch" href="/blog/assets/new-tab.html.358f4b2a.js"><link rel="prefetch" href="/blog/assets/vue-ie9.html.e00a0f5e.js"><link rel="prefetch" href="/blog/assets/vue-router-params.html.51d75b4a.js"><link rel="prefetch" href="/blog/assets/index.html.adf3ac57.js"><link rel="prefetch" href="/blog/assets/index.html.c389b862.js"><link rel="prefetch" href="/blog/assets/docker.html.0e264da8.js"><link rel="prefetch" href="/blog/assets/nginx.html.c9b5917b.js"><link rel="prefetch" href="/blog/assets/zentao.html.751fcf3d.js"><link rel="prefetch" href="/blog/assets/index.html.e81581aa.js"><link rel="prefetch" href="/blog/assets/index.html.e5608252.js"><link rel="prefetch" href="/blog/assets/index.html.77d65e36.js"><link rel="prefetch" href="/blog/assets/binary-search.html.c423aaa6.js"><link rel="prefetch" href="/blog/assets/complexity.html.54194e95.js"><link rel="prefetch" href="/blog/assets/dfs-bfs.html.f2ff4008.js"><link rel="prefetch" href="/blog/assets/recursion.html.e3cd0e23.js"><link rel="prefetch" href="/blog/assets/sort.html.8c9b00ca.js"><link rel="prefetch" href="/blog/assets/arrow-func.html.5ba7c5f4.js"><link rel="prefetch" href="/blog/assets/promise.html.7e591833.js"><link rel="prefetch" href="/blog/assets/index.html.9c584ce7.js"><link rel="prefetch" href="/blog/assets/index.html.1a061454.js"><link rel="prefetch" href="/blog/assets/index.html.0c7cd841.js"><link rel="prefetch" href="/blog/assets/index.html.a1b72615.js"><link rel="prefetch" href="/blog/assets/index.html.ef1b503b.js"><link rel="prefetch" href="/blog/assets/questions.html.4c475d35.js"><link rel="prefetch" href="/blog/assets/reactive.html.1071e187.js"><link rel="prefetch" href="/blog/assets/render.html.e340a7be.js"><link rel="prefetch" href="/blog/assets/index.html.b46aec26.js"><link rel="prefetch" href="/blog/assets/index.html.3525d0cb.js"><link rel="prefetch" href="/blog/assets/index.html.8abe3986.js"><link rel="prefetch" href="/blog/assets/Observer.html.5353a177.js"><link rel="prefetch" href="/blog/assets/def.html.fd6342b7.js"><link rel="prefetch" href="/blog/assets/defineProperty.html.71fdc0f4.js"><link rel="prefetch" href="/blog/assets/defineReactive.html.221fb315.js"><link rel="prefetch" href="/blog/assets/my-observe.html.426f146e.js"><link rel="prefetch" href="/blog/assets/observe.html.257fd616.js"><link rel="prefetch" href="/blog/assets/dep.html.6be40467.js"><link rel="prefetch" href="/blog/assets/watcher.html.c92d305a.js"><link rel="prefetch" href="/blog/assets/404.html.7d858b3d.js"><link rel="prefetch" href="/blog/assets/index.html.b9ea2679.js"><link rel="prefetch" href="/blog/assets/index.html.cd137d5b.js"><link rel="prefetch" href="/blog/assets/index.html.e4d7499a.js"><link rel="prefetch" href="/blog/assets/babel.html.43e1ec4a.js"><link rel="prefetch" href="/blog/assets/index.html.7d72b96f.js"><link rel="prefetch" href="/blog/assets/index.html.43112222.js"><link rel="prefetch" href="/blog/assets/index.html.6f883e92.js"><link rel="prefetch" href="/blog/assets/index.html.0652c146.js"><link rel="prefetch" href="/blog/assets/gauge.html.59f84ca2.js"><link rel="prefetch" href="/blog/assets/hexo.html.3fd42ccc.js"><link rel="prefetch" href="/blog/assets/tool-library.html.2a7f369e.js"><link rel="prefetch" href="/blog/assets/index.html.5a05eb6b.js"><link rel="prefetch" href="/blog/assets/algorithm-complexity.html.8fd77198.js"><link rel="prefetch" href="/blog/assets/algorithm-skill.html.57f9c858.js"><link rel="prefetch" href="/blog/assets/array.html.3eff69a6.js"><link rel="prefetch" href="/blog/assets/avl-tree.html.a31d76b2.js"><link rel="prefetch" href="/blog/assets/bst.html.3c07d222.js"><link rel="prefetch" href="/blog/assets/circular-linked-list.html.0ec6a47c.js"><link rel="prefetch" href="/blog/assets/dictionary.html.67e69091.js"><link rel="prefetch" href="/blog/assets/doubly-linked-list.html.fed4dc1b.js"><link rel="prefetch" href="/blog/assets/graph.html.4c74d7df.js"><link rel="prefetch" href="/blog/assets/linked-list.html.2cb6ecee.js"><link rel="prefetch" href="/blog/assets/minHeap.html.66d393b8.js"><link rel="prefetch" href="/blog/assets/queue.html.3f893d83.js"><link rel="prefetch" href="/blog/assets/recursive.html.4b626ebf.js"><link rel="prefetch" href="/blog/assets/red-black-tree.html.8d57546b.js"><link rel="prefetch" href="/blog/assets/set.html.46d03c86.js"><link rel="prefetch" href="/blog/assets/sort-and-search.html.05c2690d.js"><link rel="prefetch" href="/blog/assets/sorted-linked-list.html.96f536f8.js"><link rel="prefetch" href="/blog/assets/stack-linked-list.html.f5908cc2.js"><link rel="prefetch" href="/blog/assets/stack.html.b32742bf.js"><link rel="prefetch" href="/blog/assets/animation.html.3ff4cac0.js"><link rel="prefetch" href="/blog/assets/bfc.html.42704696.js"><link rel="prefetch" href="/blog/assets/box-model.html.631969b3.js"><link rel="prefetch" href="/blog/assets/center.html.d9c4f71c.js"><link rel="prefetch" href="/blog/assets/clear.html.21042dcd.js"><link rel="prefetch" href="/blog/assets/flex.html.3b27a84e.js"><link rel="prefetch" href="/blog/assets/layout.html.045b7a0f.js"><link rel="prefetch" href="/blog/assets/other.html.febb6713.js"><link rel="prefetch" href="/blog/assets/rem.html.29a3b1ae.js"><link rel="prefetch" href="/blog/assets/index.html.234dd4e4.js"><link rel="prefetch" href="/blog/assets/canvas-svg.html.9ad8d9bb.js"><link rel="prefetch" href="/blog/assets/doctype.html.40522e8e.js"><link rel="prefetch" href="/blog/assets/other.html.74223058.js"><link rel="prefetch" href="/blog/assets/painting.html.1fff6954.js"><link rel="prefetch" href="/blog/assets/reflow-repaint.html.a23eeedb.js"><link rel="prefetch" href="/blog/assets/rendering-engine.html.e8296fcc.js"><link rel="prefetch" href="/blog/assets/array.html.ce71df75.js"><link rel="prefetch" href="/blog/assets/asyn-single-thread.html.cb6d517d.js"><link rel="prefetch" href="/blog/assets/coding.html.aa4c8573.js"><link rel="prefetch" href="/blog/assets/communications.html.eec3d5a9.js"><link rel="prefetch" href="/blog/assets/data-type.html.51a617c5.js"><link rel="prefetch" href="/blog/assets/dom.html.1c3b6027.js"><link rel="prefetch" href="/blog/assets/engineering.html.117eec26.js"><link rel="prefetch" href="/blog/assets/error.html.ce5e0461.js"><link rel="prefetch" href="/blog/assets/es6.html.a0f88966.js"><link rel="prefetch" href="/blog/assets/gc.html.8d50fdcd.js"><link rel="prefetch" href="/blog/assets/http.html.9c0342c1.js"><link rel="prefetch" href="/blog/assets/object.html.2d17cc3f.js"><link rel="prefetch" href="/blog/assets/prototype-chain.html.fc2191e1.js"><link rel="prefetch" href="/blog/assets/safe.html.4bed78fc.js"><link rel="prefetch" href="/blog/assets/scope-closure.html.050358cb.js"><link rel="prefetch" href="/blog/assets/string.html.89b23bef.js"><link rel="prefetch" href="/blog/assets/index.html.b0717cbb.js"><link rel="prefetch" href="/blog/assets/v2.html.0bf761cb.js"><link rel="prefetch" href="/blog/assets/v4.html.9bf1736a.js"><link rel="prefetch" href="/blog/assets/v5.html.05f672cf.js"><link rel="prefetch" href="/blog/assets/index.html.c8334596.js"><link rel="prefetch" href="/blog/assets/index.html.2015cd85.js"><link rel="prefetch" href="/blog/assets/charles.html.fb4396e9.js"><link rel="prefetch" href="/blog/assets/git.html.656c13ef.js"><link rel="prefetch" href="/blog/assets/node-registry-manage.html.bbd73c9c.js"><link rel="prefetch" href="/blog/assets/node-version-manager.html.52c2f29d.js"><link rel="prefetch" href="/blog/assets/vue.html.6a89d40f.js"><link rel="prefetch" href="/blog/assets/auto-deploy.html.7b0edfe6.js"><link rel="prefetch" href="/blog/assets/download-by-url.html.861b3662.js"><link rel="prefetch" href="/blog/assets/download.html.d7028f22.js"><link rel="prefetch" href="/blog/assets/get-lastday.html.24383b74.js"><link rel="prefetch" href="/blog/assets/parseInt.html.c543195e.js"><link rel="prefetch" href="/blog/assets/scroll-into-view.html.8989044d.js"><link rel="prefetch" href="/blog/assets/tree-operate.html.2fbfa7c9.js"><link rel="prefetch" href="/blog/assets/index.html.cdd94e5c.js"><link rel="prefetch" href="/blog/assets/app.html.4924267e.js"><link rel="prefetch" href="/blog/assets/antd-vue-upload.html.a38f6c48.js"><link rel="prefetch" href="/blog/assets/bind-string.html.e6df00ae.js"><link rel="prefetch" href="/blog/assets/component-loop.html.e9fe2bbd.js"><link rel="prefetch" href="/blog/assets/elementui-dialog.html.54f9d6af.js"><link rel="prefetch" href="/blog/assets/elementui-dynamic-table.html.005ea454.js"><link rel="prefetch" href="/blog/assets/elementui-table-auto-height.html.15e8d207.js"><link rel="prefetch" href="/blog/assets/elementui-table-pagination.html.d66ab4ac.js"><link rel="prefetch" href="/blog/assets/fe-pagination.html.ff12ac67.js"><link rel="prefetch" href="/blog/assets/gitlab.html.cbad9c45.js"><link rel="prefetch" href="/blog/assets/init-data.html.5dd5bf31.js"><link rel="prefetch" href="/blog/assets/keep-alive.html.0201bb34.js"><link rel="prefetch" href="/blog/assets/new-tab.html.ac5a09a8.js"><link rel="prefetch" href="/blog/assets/vue-ie9.html.f071fb76.js"><link rel="prefetch" href="/blog/assets/vue-router-params.html.914a518d.js"><link rel="prefetch" href="/blog/assets/index.html.cb653700.js"><link rel="prefetch" href="/blog/assets/index.html.e97bbf46.js"><link rel="prefetch" href="/blog/assets/docker.html.aaa87d2f.js"><link rel="prefetch" href="/blog/assets/nginx.html.3b2723dd.js"><link rel="prefetch" href="/blog/assets/zentao.html.b88a885b.js"><link rel="prefetch" href="/blog/assets/index.html.d89b279f.js"><link rel="prefetch" href="/blog/assets/index.html.5f398114.js"><link rel="prefetch" href="/blog/assets/index.html.a43b5e6f.js"><link rel="prefetch" href="/blog/assets/binary-search.html.cca83917.js"><link rel="prefetch" href="/blog/assets/complexity.html.b479f825.js"><link rel="prefetch" href="/blog/assets/dfs-bfs.html.c5dafd35.js"><link rel="prefetch" href="/blog/assets/recursion.html.a78fd449.js"><link rel="prefetch" href="/blog/assets/sort.html.acc9bd26.js"><link rel="prefetch" href="/blog/assets/arrow-func.html.847161d9.js"><link rel="prefetch" href="/blog/assets/promise.html.202ba26e.js"><link rel="prefetch" href="/blog/assets/index.html.f4402338.js"><link rel="prefetch" href="/blog/assets/index.html.5d118d72.js"><link rel="prefetch" href="/blog/assets/index.html.4725057f.js"><link rel="prefetch" href="/blog/assets/index.html.8e97c676.js"><link rel="prefetch" href="/blog/assets/index.html.a6e1f2ee.js"><link rel="prefetch" href="/blog/assets/questions.html.27e5cee2.js"><link rel="prefetch" href="/blog/assets/reactive.html.6b66c413.js"><link rel="prefetch" href="/blog/assets/render.html.2475defc.js"><link rel="prefetch" href="/blog/assets/index.html.fde6872b.js"><link rel="prefetch" href="/blog/assets/index.html.c4d8d9d0.js"><link rel="prefetch" href="/blog/assets/index.html.26e69cd1.js"><link rel="prefetch" href="/blog/assets/Observer.html.c7613d51.js"><link rel="prefetch" href="/blog/assets/def.html.0059d194.js"><link rel="prefetch" href="/blog/assets/defineProperty.html.31aa95b3.js"><link rel="prefetch" href="/blog/assets/defineReactive.html.07c1b48e.js"><link rel="prefetch" href="/blog/assets/my-observe.html.818c7651.js"><link rel="prefetch" href="/blog/assets/observe.html.61b383a4.js"><link rel="prefetch" href="/blog/assets/dep.html.62c8c8a6.js"><link rel="prefetch" href="/blog/assets/watcher.html.5222e5e8.js"><link rel="prefetch" href="/blog/assets/404.html.d18c3305.js"><link rel="prefetch" href="/blog/assets/404.3a651837.js"><link rel="prefetch" href="/blog/assets/Layout.92b91f17.js">
    <link rel="stylesheet" href="/blog/assets/style.0988b2b7.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/blog/" class=""><!----><span class="site-name">Blog</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/blog/base/" class="router-link-active" aria-label="FE"><!--[--><!--]--> FE <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Framework"><span class="title">Framework</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Framework"><span class="title">Framework</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Vue</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog/framework/vue/v3/" class="" aria-label="v3"><!--[--><!--]--> v3 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/framework/vue/v2/" class="" aria-label="v2"><!--[--><!--]--> v2 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/framework/vue/vue-router/" class="" aria-label="vue-router"><!--[--><!--]--> vue-router <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/framework/vue/vuex/" class="" aria-label="vuex"><!--[--><!--]--> vuex <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/framework/vue/axios/" class="" aria-label="axios"><!--[--><!--]--> axios <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><a href="/blog/framework/react/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Bundler"><span class="title">Bundler</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Bundler"><span class="title">Bundler</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Webpack</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog/bundler/webpack/v5.md" class="" aria-label="v5"><!--[--><!--]--> v5 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/bundler/webpack/v4.md" class="" aria-label="v4"><!--[--><!--]--> v4 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/bundler/webpack/v2.md" class="" aria-label="v2"><!--[--><!--]--> v2 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/bundler/babel.md" class="" aria-label="babel"><!--[--><!--]--> babel <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a href="/blog/node/" class="" aria-label="node"><!--[--><!--]--> node <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/job-summary/" class="" aria-label="JobSummary"><!--[--><!--]--> JobSummary <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/share/" class="" aria-label="Share"><!--[--><!--]--> Share <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/leetcode/" class="" aria-label="leetcode"><!--[--><!--]--> leetcode <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/audition/" class="" aria-label="HK-Office"><!--[--><!--]--> HK-Office <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/Jerry-bbq?tab=repositories" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="切换主题"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/blog/base/" class="router-link-active" aria-label="FE"><!--[--><!--]--> FE <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Framework"><span class="title">Framework</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Framework"><span class="title">Framework</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Vue</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog/framework/vue/v3/" class="" aria-label="v3"><!--[--><!--]--> v3 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/framework/vue/v2/" class="" aria-label="v2"><!--[--><!--]--> v2 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/framework/vue/vue-router/" class="" aria-label="vue-router"><!--[--><!--]--> vue-router <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/framework/vue/vuex/" class="" aria-label="vuex"><!--[--><!--]--> vuex <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/framework/vue/axios/" class="" aria-label="axios"><!--[--><!--]--> axios <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><a href="/blog/framework/react/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Bundler"><span class="title">Bundler</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Bundler"><span class="title">Bundler</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Webpack</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog/bundler/webpack/v5.md" class="" aria-label="v5"><!--[--><!--]--> v5 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/bundler/webpack/v4.md" class="" aria-label="v4"><!--[--><!--]--> v4 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/bundler/webpack/v2.md" class="" aria-label="v2"><!--[--><!--]--> v2 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog/bundler/babel.md" class="" aria-label="babel"><!--[--><!--]--> babel <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a href="/blog/node/" class="" aria-label="node"><!--[--><!--]--> node <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/job-summary/" class="" aria-label="JobSummary"><!--[--><!--]--> JobSummary <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/share/" class="" aria-label="Share"><!--[--><!--]--> Share <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/leetcode/" class="" aria-label="leetcode"><!--[--><!--]--> leetcode <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/audition/" class="" aria-label="HK-Office"><!--[--><!--]--> HK-Office <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/Jerry-bbq?tab=repositories" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">性能优化 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#网络层面" class="router-link-active router-link-exact-active sidebar-item" aria-label="网络层面"><!--[--><!--]--> 网络层面 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#http优化概述" class="router-link-active router-link-exact-active sidebar-item" aria-label="HTTP优化概述"><!--[--><!--]--> HTTP优化概述 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#loader优化-以babel-loader为例" class="router-link-active router-link-exact-active sidebar-item" aria-label="loader优化-以babel-loader为例："><!--[--><!--]--> loader优化-以babel-loader为例： <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#第三方库提取" class="router-link-active router-link-exact-active sidebar-item" aria-label="第三方库提取"><!--[--><!--]--> 第三方库提取 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#构建结果体积压缩" class="router-link-active router-link-exact-active sidebar-item" aria-label="构建结果体积压缩"><!--[--><!--]--> 构建结果体积压缩 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#gzip压缩原理" class="router-link-active router-link-exact-active sidebar-item" aria-label="Gzip压缩原理"><!--[--><!--]--> Gzip压缩原理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#图片的优化" class="router-link-active router-link-exact-active sidebar-item" aria-label="图片的优化"><!--[--><!--]--> 图片的优化 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#浏览器的缓存" class="router-link-active router-link-exact-active sidebar-item" aria-label="浏览器的缓存"><!--[--><!--]--> 浏览器的缓存 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#本地缓存" class="router-link-active router-link-exact-active sidebar-item" aria-label="本地缓存"><!--[--><!--]--> 本地缓存 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#cdn内容分发网络" class="router-link-active router-link-exact-active sidebar-item" aria-label="CDN内容分发网络"><!--[--><!--]--> CDN内容分发网络 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#服务端渲染ssr" class="router-link-active router-link-exact-active sidebar-item" aria-label="服务端渲染SSR"><!--[--><!--]--> 服务端渲染SSR <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#渲染层面" class="router-link-active router-link-exact-active sidebar-item" aria-label="渲染层面"><!--[--><!--]--> 渲染层面 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#性能监控" class="router-link-active router-link-exact-active sidebar-item" aria-label="性能监控"><!--[--><!--]--> 性能监控 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#定位问题" class="router-link-active router-link-exact-active sidebar-item" aria-label="定位问题"><!--[--><!--]--> 定位问题 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#减少网络时间" class="router-link-active router-link-exact-active sidebar-item" aria-label="减少网络时间"><!--[--><!--]--> 减少网络时间 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#减少请求量" class="router-link-active router-link-exact-active sidebar-item" aria-label="减少请求量"><!--[--><!--]--> 减少请求量 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#异步加载的方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="异步加载的方式"><!--[--><!--]--> 异步加载的方式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#其他" class="router-link-active router-link-exact-active sidebar-item" aria-label="其他"><!--[--><!--]--> 其他 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#服务端返回十万条数据-前端如何优雅的展示" class="router-link-active router-link-exact-active sidebar-item" aria-label="服务端返回十万条数据，前端如何优雅的展示"><!--[--><!--]--> 服务端返回十万条数据，前端如何优雅的展示 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#settimeout" class="router-link-active router-link-exact-active sidebar-item" aria-label="setTimeout"><!--[--><!--]--> setTimeout <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#requestanimationframe" class="router-link-active router-link-exact-active sidebar-item" aria-label="requestAnimationFrame"><!--[--><!--]--> requestAnimationFrame <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#requestanimationframe-fragment" class="router-link-active router-link-exact-active sidebar-item" aria-label="requestAnimationFrame+fragment"><!--[--><!--]--> requestAnimationFrame+fragment <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#页面卡顿如何优化" class="router-link-active router-link-exact-active sidebar-item" aria-label="页面卡顿如何优化"><!--[--><!--]--> 页面卡顿如何优化 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#chrome浏览器performance" class="router-link-active router-link-exact-active sidebar-item" aria-label="chrome浏览器performance"><!--[--><!--]--> chrome浏览器performance <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#前端性能监控" class="router-link-active router-link-exact-active sidebar-item" aria-label="前端性能监控"><!--[--><!--]--> 前端性能监控 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#timing" class="router-link-active router-link-exact-active sidebar-item" aria-label="timing"><!--[--><!--]--> timing <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#常用计算" class="router-link-active router-link-exact-active sidebar-item" aria-label="常用计算"><!--[--><!--]--> 常用计算 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#navigation" class="router-link-active router-link-exact-active sidebar-item" aria-label="navigation"><!--[--><!--]--> navigation <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/base/javascript/page-performance.html#memory" class="router-link-active router-link-exact-active sidebar-item" aria-label="memory"><!--[--><!--]--> memory <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="性能优化" tabindex="-1"><a class="header-anchor" href="#性能优化" aria-hidden="true">#</a> 性能优化</h1><h2 id="网络层面" tabindex="-1"><a class="header-anchor" href="#网络层面" aria-hidden="true">#</a> 网络层面</h2><ul><li>DNS解析</li><li>TCP连接</li><li>HTTP请求和响应</li></ul><h3 id="http优化概述" tabindex="-1"><a class="header-anchor" href="#http优化概述" aria-hidden="true">#</a> HTTP优化概述</h3><ul><li>减少请求次数</li><li>减少单次请求所花的时间</li></ul><p>总的来说也就是资源的压缩与合并，在这里使用webpack来实现。</p><p>webpack的优化瓶颈有两个方面：</p><ul><li>构建过程时间太长</li><li>打包体积过大</li></ul><h3 id="loader优化-以babel-loader为例" tabindex="-1"><a class="header-anchor" href="#loader优化-以babel-loader为例" aria-hidden="true">#</a> loader优化-以babel-loader为例：</h3><p>使用<code>exclude</code>和<code>include</code>来避免不必要的转义，如第三方库<code>node_modules</code>：</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(node_modules|bower_components)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;babel-loader&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;@babel/preset-env&#39;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>开启缓存系统：</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;babel-loader?cacheDirectory&#39;</span>
<span class="token comment">// 或者</span>
<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;babel-loader?cacheDirectory=true&#39;</span>
</code></pre></div><h3 id="第三方库提取" tabindex="-1"><a class="header-anchor" href="#第三方库提取" aria-hidden="true">#</a> 第三方库提取</h3><ul><li><code>externals</code>可以防止将某些<code>import</code>的包打包到<code>bundle</code>中，而在运行时再去从外部获取这些依赖。比如第三方库<code>jQuery</code>使用CDN引入</li></ul><p>webpack.config.js</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">externals</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">jquery</span><span class="token operator">:</span> <span class="token string">&#39;jQuery&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>在代码中<code>import $ from &#39;jquery&#39;</code>依然可以正常运行</p><ul><li><code>CommonsChunkPlugin</code>提取第三方库和代码中的<strong>公共模块</strong>，并将他们打包到一个单独的文件中避免bundle体积过大，也避免重复打包（于webpack v4 版本中移除，新增<code>SplitChunksPlugin</code>）</li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>SplitChunksPlugin</code></li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// options</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>DllPlugin</code>，拆分bundles，同时大大提升构建速度。</li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">// 生成一个`manifest.json`文件</span>
<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllPlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>

<span class="token comment">// 引用`manifest.json`文件</span>
<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllReferencePlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
</code></pre></div><h3 id="构建结果体积压缩" tabindex="-1"><a class="header-anchor" href="#构建结果体积压缩" aria-hidden="true">#</a> 构建结果体积压缩</h3><p>引入可视化工具<a href="https://github.com/webpack-contrib/webpack-bundle-analyzer" target="_blank" rel="noopener noreferrer">webpack-bundle-analyzer<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，查看各个模块的大小以及依赖关系进行分析</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack-bundle-analyzer
<span class="token comment"># 或</span>
<span class="token function">yarn</span> <span class="token function">add</span> -D webpack-bundle-analyzer
</code></pre></div><ul><li>拆分资源（DllPlugin）</li><li>删除冗余代码（Tree Shaking基于import/export语法）</li><li>按需加载（异步路由）</li><li>代码压缩</li></ul><h3 id="gzip压缩原理" tabindex="-1"><a class="header-anchor" href="#gzip压缩原理" aria-hidden="true">#</a> Gzip压缩原理</h3><h3 id="图片的优化" tabindex="-1"><a class="header-anchor" href="#图片的优化" aria-hidden="true">#</a> 图片的优化</h3><p>Web图片格式有JPEG/JPG、PNG、WebP、Base64、SVG等</p><p>JPEG/JPG关键字：有损压缩、体积小、加载快、不支持透明</p><p>PNG关键字：无损压缩、质量高、体积大、支持透明</p><p>SVG文本文件、体积小、不失真、兼容性好</p><p>Base64文本文件、依赖编码、小图标解决方案</p><ul><li>雪碧图（CSS Sprites），将小图标合并到一张图中，减少请求次数，Base64是作为雪碧图的补充而存在的。</li></ul><p>Base64是一种用于传输8Bit字节码的编码方式，通过对图片进行Base64编码，我们可以直接将编码结果写入HTML或者写入CSS，从而减少HTTP请求的次数。</p><p>Base64的应用场景：</p><ul><li>图片的实际尺寸很小（大家可以观察一下掘金页面的Base64图，几乎没有超过2kb的）</li><li>图片无法以雪碧图的形式与其它小图结合（合成雪碧图仍是主要的减少HTTP请求的途径，Base64是雪碧图的补充）</li><li>图片的更新频率非常低（不需我们重复编码和修改文件内容，维护成本较低）</li></ul><p>webpack的<code>url-loader</code>可以帮助我们进行Base64编码</p><p>webp像jpeg图片细节丰富，像png支持透明，像gif支持动态显示图片，兼容性不是很好</p><h3 id="浏览器的缓存" tabindex="-1"><a class="header-anchor" href="#浏览器的缓存" aria-hidden="true">#</a> 浏览器的缓存</h3><ul><li>强缓存</li><li>协商缓存</li></ul><h3 id="本地缓存" tabindex="-1"><a class="header-anchor" href="#本地缓存" aria-hidden="true">#</a> 本地缓存</h3><p>cookie，localstorage，sessionstorage</p><h3 id="cdn内容分发网络" tabindex="-1"><a class="header-anchor" href="#cdn内容分发网络" aria-hidden="true">#</a> CDN内容分发网络</h3><h3 id="服务端渲染ssr" tabindex="-1"><a class="header-anchor" href="#服务端渲染ssr" aria-hidden="true">#</a> 服务端渲染SSR</h3><h2 id="渲染层面" tabindex="-1"><a class="header-anchor" href="#渲染层面" aria-hidden="true">#</a> 渲染层面</h2><ul><li>减少DOM操作</li><li>异步更新DOM</li><li>图片懒加载</li><li>防抖节流</li></ul><h2 id="性能监控" tabindex="-1"><a class="header-anchor" href="#性能监控" aria-hidden="true">#</a> 性能监控</h2><p>浏览器的performance、Lighthouse与performance api</p><h2 id="定位问题" tabindex="-1"><a class="header-anchor" href="#定位问题" aria-hidden="true">#</a> 定位问题</h2><p><a href="https://juejin.cn/post/6904517485349830670" target="_blank" rel="noopener noreferrer">参考<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>chrome的network</li><li>webpack的webpack-bundle-analyzer</li><li>chrome的Performance</li><li>PerformanceNavigationTiming</li><li>抓包</li><li>性能测试工具（Pingdom、Load Impact、Free Speed Test等）</li></ul><h2 id="减少网络时间" tabindex="-1"><a class="header-anchor" href="#减少网络时间" aria-hidden="true">#</a> 减少网络时间</h2><ul><li>DNS缓存</li></ul><div class="language-html ext-html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>x-dns-prefetch-control<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>on<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dns-prefetch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>//host_name_to_prefetch.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>减少传输的文件大小（文件压缩）</li><li>加快文件传输速度（静态资源使用CDN内容分发网络）</li><li>使用 HTTP2</li></ul><h2 id="减少请求量" tabindex="-1"><a class="header-anchor" href="#减少请求量" aria-hidden="true">#</a> 减少请求量</h2><ul><li><p>浏览器缓存（强缓存和协商缓存）</p><ol><li>强缓存 不会向服务器发送请求，直接从缓存中读取资源，在chrome控制台的network选项中可以看到该请求返回200的状态码;</li></ol><div class="language-bash ext-sh"><pre class="language-bash"><code>Expires:Thu,21 Jan <span class="token number">2017</span> <span class="token number">23</span>:39:02 GMT
Cache-Control Cache-Control:max-age<span class="token operator">=</span><span class="token number">3600</span>
</code></pre></div><ol start="2"><li>协商缓存 向服务器发送请求，服务器会根据这个请求的request header的一些参数来判断是否命中协商缓存，如果命中，则返回304状态码并带上新的response header通知浏览器从缓存中读取资源；</li></ol><div class="language-bash ext-sh"><pre class="language-bash"><code>Last-Modified/If-Modified-Since Last-Modified:Wed,26 Jan <span class="token number">2017</span> 00:35:11 GMT
Etag If-None-Match
</code></pre></div></li></ul><div class="custom-container tip"><p class="custom-container-title">区别</p><p>都是从客户端缓存中读取资源；区别是强缓存不会发请求，协商缓存会发请求</p></div><ul><li>减少HTTP请求</li><li>资源压缩合并</li><li>小图片采用雪碧图，合并成一个大的图片文件</li><li>图片使用base64编码</li><li>使用字体图标来代替图片</li></ul><h2 id="异步加载的方式" tabindex="-1"><a class="header-anchor" href="#异步加载的方式" aria-hidden="true">#</a> 异步加载的方式</h2><ol><li>动态脚本加载；</li><li>defer：defer是在HTML解析完之后才会执行，如果是多个，按照加载的顺序依次执行</li><li>async：async是在加载完之后立即执行，如果是多个，执行顺序和加载顺序无关</li></ol><h2 id="其他" tabindex="-1"><a class="header-anchor" href="#其他" aria-hidden="true">#</a> 其他</h2><ul><li>图片延迟加载</li><li>提取第三方库</li><li>减少DOM操作</li><li>使用事件委托</li><li>降低CSS选择器的复杂性</li></ul><h2 id="服务端返回十万条数据-前端如何优雅的展示" tabindex="-1"><a class="header-anchor" href="#服务端返回十万条数据-前端如何优雅的展示" aria-hidden="true">#</a> 服务端返回十万条数据，前端如何优雅的展示</h2><p>还可以加上<code>fragment</code></p><h3 id="settimeout" tabindex="-1"><a class="header-anchor" href="#settimeout" aria-hidden="true">#</a> setTimeout</h3><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">renderListBySetTimeout</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">&#39;列表时间&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> total <span class="token operator">=</span> list<span class="token punctuation">.</span>length
    <span class="token keyword">const</span> page <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">const</span> limit <span class="token operator">=</span> <span class="token number">200</span>
    <span class="token keyword">const</span> totalPage <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>total <span class="token operator">/</span> limit<span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>page <span class="token operator">&gt;=</span> totalPage<span class="token punctuation">)</span> <span class="token keyword">return</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> page <span class="token operator">*</span> limit<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> page <span class="token operator">*</span> limit <span class="token operator">+</span> limit<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> item <span class="token operator">=</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
                <span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span>
                div<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&#39;sunshine&#39;</span>
                div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;img src=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>src<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; /&gt;&lt;span&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>text<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span&gt;</span><span class="token template-punctuation string">`</span></span>
                container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token function">render</span><span class="token punctuation">(</span>page <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">&#39;列表时间&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="requestanimationframe" tabindex="-1"><a class="header-anchor" href="#requestanimationframe" aria-hidden="true">#</a> requestAnimationFrame</h3><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">renderListByrequestAnimationFrame</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">&#39;列表时间&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span>
    <span class="token keyword">const</span> total <span class="token operator">=</span> list<span class="token punctuation">.</span>length
    <span class="token keyword">const</span> page <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">const</span> limit <span class="token operator">=</span> <span class="token number">200</span>
    <span class="token keyword">const</span> totalPage <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>total <span class="token operator">/</span> limit<span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>page <span class="token operator">&gt;=</span> totalPage<span class="token punctuation">)</span> <span class="token keyword">return</span>
        <span class="token comment">// 使用requestAnimationFrame代替setTimeout</span>
        <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> page <span class="token operator">*</span> limit<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> page <span class="token operator">*</span> limit <span class="token operator">+</span> limit<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> item <span class="token operator">=</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
                <span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span>
                div<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&#39;sunshine&#39;</span>
                div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;img src=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>src<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; /&gt;&lt;span&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>text<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span&gt;</span><span class="token template-punctuation string">`</span></span>
                container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token function">render</span><span class="token punctuation">(</span>page <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">&#39;列表时间&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="requestanimationframe-fragment" tabindex="-1"><a class="header-anchor" href="#requestanimationframe-fragment" aria-hidden="true">#</a> requestAnimationFrame+fragment</h3><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">// requestAnimationFrame + 文档碎片</span>
<span class="token keyword">const</span> <span class="token function-variable function">renderListByRequestAnimationFrameAndFragment</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">&#39;列表时间&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span>
    <span class="token keyword">const</span> total <span class="token operator">=</span> list<span class="token punctuation">.</span>length
    <span class="token keyword">const</span> page <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">const</span> limit <span class="token operator">=</span> <span class="token number">200</span>
    <span class="token keyword">const</span> totalPage <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>total <span class="token operator">/</span> limit<span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>page <span class="token operator">&gt;=</span> totalPage<span class="token punctuation">)</span> <span class="token keyword">return</span>
        <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// 创建一个文档碎片</span>
            <span class="token keyword">const</span> fragment <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> page <span class="token operator">*</span> limit<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> page <span class="token operator">*</span> limit <span class="token operator">+</span> limit<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> item <span class="token operator">=</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
                <span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span>
                div<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&#39;sunshine&#39;</span>
                div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;img src=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>src<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; /&gt;&lt;span&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>text<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span&gt;</span><span class="token template-punctuation string">`</span></span>
                <span class="token comment">// 先塞进文档碎片</span>
                fragment<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 一次性appendChild</span>
            container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span>
            <span class="token function">render</span><span class="token punctuation">(</span>page <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">&#39;列表时间&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://github.com/luguanrui/more-data-render" target="_blank" rel="noopener noreferrer">demo<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="页面卡顿如何优化" tabindex="-1"><a class="header-anchor" href="#页面卡顿如何优化" aria-hidden="true">#</a> 页面卡顿如何优化</h2><p>纯列表展示，Vue项目可以使用<code>Object.freeze()</code>冻结接口返回的数据</p><h2 id="chrome浏览器performance" tabindex="-1"><a class="header-anchor" href="#chrome浏览器performance" aria-hidden="true">#</a> chrome浏览器performance</h2><h2 id="前端性能监控" tabindex="-1"><a class="header-anchor" href="#前端性能监控" aria-hidden="true">#</a> 前端性能监控</h2><p><a href="https://web.dev/vitals/" target="_blank" rel="noopener noreferrer">web-vitals JavaScript库<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://github.com/w3c/navigation-timing" target="_blank" rel="noopener noreferrer">参考W3C标准<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>前端性能监控主要使用<code>Performance</code>接口，获取当前页面中与性能相关的信息，有三个level:</p><ul><li><a href="https://w3c.github.io/navigation-timing/" target="_blank" rel="noopener noreferrer">草案<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.w3.org/TR/navigation-timing-2/" target="_blank" rel="noopener noreferrer">Navigation Timing Level 2<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.w3.org/TR/navigation-timing/" target="_blank" rel="noopener noreferrer">Navigation Timing Level 1<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><p>可以通过<code>window.performance</code>来获取</p><h3 id="timing" tabindex="-1"><a class="header-anchor" href="#timing" aria-hidden="true">#</a> timing</h3><p>从输入url到用户可以使用页面的全过程时间统计，会返回一个PerformanceTiming对象，单位均为毫秒</p><p><img src="/blog/assets/timestamp-diagram.d3937a42.svg" alt="timing"></p><p>按照触发顺序排列所有属性：</p><ul><li>navigationStart:在同一个浏览器上下文中，前一个网页（与当前页面不一定同域）unload 的时间戳，如果无前一个网页 unload ，则与 fetchStart 值相等</li><li>unloadEventStart:前一个网页（与当前页面同域）unload 的时间戳，如果无前一个网页 unload 或者前一个网页与当前页面不同域，则值为 0</li><li>unloadEventEnd:和 unloadEventStart 相对应，返回前一个网页 unload 事件绑定的回调函数执行完毕的时间戳</li><li>redirectStart:第一个 HTTP 重定向发生时的时间。有跳转且是同域名内的重定向才算，否则值为 0</li><li>redirectEnd:最后一个 HTTP 重定向完成时的时间。有跳转且是同域名内的重定向才算，否则值为 0</li><li>fetchStart:浏览器准备好使用 HTTP 请求抓取文档的时间，这发生在检查本地缓存之前</li><li>domainLookupStart:DNS 域名查询开始的时间，如果使用了本地缓存（即无 DNS 查询）或持久连接，则与 fetchStart 值相等</li><li>domainLookupEnd:DNS 域名查询完成的时间，如果使用了本地缓存（即无 DNS 查询）或持久连接，则与 fetchStart 值相等</li><li>connectStart:HTTP（TCP） 开始建立连接的时间，如果是持久连接，则与 fetchStart 值相等,如果在传输层发生了错误且重新建立连接，则这里显示的是新建立的连接开始的时间</li><li>connectEnd:HTTP（TCP） 完成建立连接的时间（完成握手），如果是持久连接，则与 fetchStart 值相等,如果在传输层发生了错误且重新建立连接，则这里显示的是新建立的连接完成的时间（这里握手结束，包括安全连接建立完成、SOCKS 授权通过）</li><li>secureConnectionStart:HTTPS 连接开始的时间，如果不是安全连接，则值为 0</li><li>requestStart:HTTP 请求读取真实文档开始的时间（完成建立连接），包括从本地读取缓存,连接错误重连时，这里显示的也是新建立连接的时间</li><li>responseStart:HTTP 开始接收响应的时间（获取到第一个字节），包括从本地读取缓存</li><li>responseEnd:HTTP 响应全部接收完成的时间（获取到最后一个字节），包括从本地读取缓存</li><li>domLoading:开始解析渲染 DOM 树的时间，此时 Document.readyState 变为 loading，并将抛出 readystatechange 相关事件</li><li>domInteractive:完成解析 DOM 树的时间，Document.readyState 变为 interactive，并将抛出 readystatechange 相关事件</li><li>domContentLoadedEventStart:DOM 解析完成后，网页内资源加载开始的时间,文档发生 DOMContentLoaded事件的时间</li><li>domContentLoadedEventEnd:DOM 解析完成后，网页内资源加载完成的时间（如 JS 脚本加载执行完毕），文档的DOMContentLoaded 事件的结束时间</li><li>domComplete:DOM 树解析完成，且资源也准备就绪的时间，Document.readyState 变为 complete，并将抛出 readystatechange 相关事件</li><li>loadEventStart:load 事件发送给文档，也即 load 回调函数开始执行的时间,如果没有绑定 load 事件，值为 0</li><li>loadEventEnd:load 事件的回调函数执行完毕的时间,如果没有绑定 load 事件，值为 0</li></ul><h4 id="常用计算" tabindex="-1"><a class="header-anchor" href="#常用计算" aria-hidden="true">#</a> 常用计算</h4><ul><li>DNS查询耗时 ：domainLookupEnd - domainLookupStart</li><li>TCP链接耗时 ：connectEnd - connectStart</li><li>request请求耗时 ：responseEnd - responseStart</li><li>解析dom树耗时 ： domComplete - domInteractive</li><li>白屏时间 domLoading - fetchStart</li><li>domready时间(用户可操作时间节点) ：domContentLoadedEventEnd - fetchStart</li><li>onload时间(总下载时间) : loadEventEnd - fetchStart</li></ul><h3 id="navigation" tabindex="-1"><a class="header-anchor" href="#navigation" aria-hidden="true">#</a> navigation</h3><p>旨在告诉开发者当前页面是通过什么方式导航过来的，只有两个属性：<code>type</code>，<code>redirectCount</code></p><ul><li><p>type:标志页面导航类型</p><ul><li>0:普通进入，包括：点击链接、在地址栏中输入 URL、表单提交、或者通过除下表中 TYPE_RELOAD 和 TYPE_BACK_FORWARD 的方式初始化脚本。</li><li>1:通过刷新进入，包括：浏览器的刷新按钮、快捷键刷新、location.reload()等方法。</li><li>2:通过操作历史记录进入，包括：浏览器的前进后退按钮、快捷键操作、history.forward()、history.back()、history.go(num)。</li><li>255:其他非以上类型的方式进入。</li></ul></li><li><p>redirectCount:表示到达最终页面前，重定向的次数，但是这个接口有同源策略限制，即仅能检测同源的重定向。</p></li></ul><h3 id="memory" tabindex="-1"><a class="header-anchor" href="#memory" aria-hidden="true">#</a> memory</h3><p>描述内存多少，是在Chrome中添加的一个非标准属性。</p><ul><li>jsHeapSizeLimit: 内存大小限制</li><li>totalJSHeapSize: 可使用的内存</li><li>usedJSHeapSize: JS对象(包括V8引擎内部对象)占用的内存，不能大于totalJSHeapSize，如果大于，有可能出现了内存泄漏</li></ul></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/blog/assets/app.c5e3b20f.js" defer></script>
  </body>
</html>
