import{_ as i,c as a,o as s,V as l}from"./chunks/framework.e0zpvRJ8.js";const g=JSON.parse('{"title":"错误监控","description":"","frontmatter":{},"headers":[],"relativePath":"primary/javascript/error.md","filePath":"primary/javascript/error.md","lastUpdated":1657430464000}'),e={name:"primary/javascript/error.md"},t=l(`<h1 id="错误监控" tabindex="-1">错误监控 <a class="header-anchor" href="#错误监控" aria-label="Permalink to &quot;错误监控&quot;">​</a></h1><h2 id="前端错误的分类" tabindex="-1">前端错误的分类 <a class="header-anchor" href="#前端错误的分类" aria-label="Permalink to &quot;前端错误的分类&quot;">​</a></h2><ul><li>即时运行错误：代码错误</li><li>资源加载错误：js，css，图片加载等错误</li></ul><h2 id="错误的捕获方式" tabindex="-1">错误的捕获方式 <a class="header-anchor" href="#错误的捕获方式" aria-label="Permalink to &quot;错误的捕获方式&quot;">​</a></h2><ol><li><p>即时运行错误的捕获方式：</p><ul><li>try...catch</li><li>window.onerror</li></ul></li><li><p>资源加载错误的捕获方式：</p><ul><li>object.onerror</li><li>performance.getEntries()，返回一个数组</li><li>Error事件捕获</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;error&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;捕获错误&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,e)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div></li></ol><p>问：跨域的js运行错误可以捕获嘛，错误提示什么，应该怎么处理？</p><p>答：可以捕获到错误信息，拿不到如下信息：出错文件，出错行号，出错列号，错误信息</p><h2 id="处理方式" tabindex="-1">处理方式 <a class="header-anchor" href="#处理方式" aria-label="Permalink to &quot;处理方式&quot;">​</a></h2><ol><li>在script标签增加<code>crossorigin</code>属性</li><li>设置js资源响应头<code>Access-Control-Allow-Origin:*</code></li></ol><h2 id="上报错误的基本原理" tabindex="-1">上报错误的基本原理 <a class="header-anchor" href="#上报错误的基本原理" aria-label="Permalink to &quot;上报错误的基本原理&quot;">​</a></h2><ol><li>采用Ajax通信的方式上报</li><li>利用Image对象上报（所有的监控系统都是基于此来做的）</li></ol>`,11),r=[t];function n(h,o,p,d,k,c){return s(),a("div",null,r)}const u=i(e,[["render",n]]);export{g as __pageData,u as default};
